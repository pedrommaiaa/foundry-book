<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Foundry Book</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary">
        <meta property="og:title" content="Foundry Book" />
        <meta property="og:description" content="A book on all things Foundry" />
        <meta name="twitter:image:src" content="https://raw.githubusercontent.com/onbjerg/foundry-book/master/theme/card.png" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A book on all things Foundry">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/static/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="getting-started/installation.html">Installation</a></li><li class="chapter-item expanded "><a href="getting-started/first-steps.html">First Steps with Foundry</a></li><li class="chapter-item expanded affix "><li class="part-title">Projects</li><li class="chapter-item expanded "><a href="projects/creating-a-new-project.html">Creating a New Project</a></li><li class="chapter-item expanded "><a href="projects/working-on-an-existing-project.html">Working on an Existing Project</a></li><li class="chapter-item expanded "><a href="projects/dependencies.html">Dependencies</a></li><li class="chapter-item expanded "><a href="projects/project-layout.html">Project Layout</a></li><li class="chapter-item expanded affix "><li class="part-title">Forge Overview</li><li class="chapter-item expanded "><a href="forge/index.html">Overview of forge</a></li><li class="chapter-item expanded "><a href="forge/tests.html">Tests</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="forge/writing-tests.html">Writing Tests</a></li><li class="chapter-item "><a href="forge/cheatcodes.html">Cheatcodes</a></li><li class="chapter-item "><a href="forge/traces.html">Understanding Traces</a></li><li class="chapter-item "><a href="forge/forking-mode.html">Forking Mode</a></li></ol></li><li class="chapter-item expanded "><a href="forge/advanced-testing.html">Advanced Testing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="forge/fuzz-testing.html">Fuzz Testing</a></li></ol></li><li class="chapter-item expanded "><a href="forge/deploying.html">Deploying and Verifying</a></li><li class="chapter-item expanded "><div>Gas Tracking</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="forge/gas-reports.html">Gas Reports</a></li></ol></li><li class="chapter-item expanded "><a href="forge/debugger.html">Debugger</a></li><li class="chapter-item expanded affix "><li class="part-title">Cast Overview</li><li class="chapter-item expanded "><a href="cast/index.html">Overview of cast</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="config/index.html">Configuring with foundry.toml</a></li><li class="chapter-item expanded "><a href="config/continous-integration.html">Continuous Integration</a></li><li class="chapter-item expanded "><a href="config/vscode.html">Integrating with VSCode</a></li><li class="chapter-item expanded "><a href="config/shell-autocompletion.html">Shell Autocompletion</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="tutorials/solmate-nft.html">Creating an NFT with Solmate</a></li><li class="chapter-item expanded "><a href="tutorials/foundry-docker.html">Docker and Foundry</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><div>FAQ</div></li><li class="chapter-item expanded "><div>References</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div>forge Reference</div></li><li class="chapter-item "><a href="reference/cast.html">cast Reference</a></li><li class="chapter-item "><a href="reference/config.html">foundry.toml Reference</a></li><li class="chapter-item "><a href="reference/ds-test.html">ds-test Reference</a></li><li class="chapter-item "><a href="cheatcodes/index.html">Cheatcodes Reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/environment.html">Environment</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/warp.html">warp</a></li><li class="chapter-item "><a href="cheatcodes/roll.html">roll</a></li><li class="chapter-item "><a href="cheatcodes/fee.html">fee</a></li><li class="chapter-item "><a href="cheatcodes/store.html">store</a></li><li class="chapter-item "><a href="cheatcodes/load.html">load</a></li><li class="chapter-item "><a href="cheatcodes/etch.html">etch</a></li><li class="chapter-item "><a href="cheatcodes/deal.html">deal</a></li><li class="chapter-item "><a href="cheatcodes/prank.html">prank</a></li><li class="chapter-item "><a href="cheatcodes/start-prank.html">startPrank</a></li><li class="chapter-item "><a href="cheatcodes/stop-prank.html">stopPrank</a></li><li class="chapter-item "><a href="cheatcodes/record.html">record</a></li><li class="chapter-item "><a href="cheatcodes/accesses.html">accesses</a></li><li class="chapter-item "><a href="cheatcodes/set-nonce.html">setNonce</a></li><li class="chapter-item "><a href="cheatcodes/get-nonce.html">getNonce</a></li><li class="chapter-item "><a href="cheatcodes/mock-call.html">mockCall</a></li><li class="chapter-item "><a href="cheatcodes/clear-mocked-calls.html">clearMockedCalls</a></li></ol></li><li class="chapter-item "><a href="cheatcodes/assertions.html">Assertions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/expect-revert.html">expectRevert</a></li><li class="chapter-item "><a href="cheatcodes/expect-emit.html">expectEmit</a></li><li class="chapter-item "><a href="cheatcodes/expect-call.html">expectCall</a></li></ol></li><li class="chapter-item "><a href="cheatcodes/fuzzer.html">Fuzzer</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/assume.html">assume</a></li></ol></li><li class="chapter-item "><a href="cheatcodes/external.html">External</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/ffi.html">ffi</a></li><li class="chapter-item "><a href="cheatcodes/get-code.html">getCode</a></li></ol></li><li class="chapter-item "><a href="cheatcodes/utilities.html">Utilities</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cheatcodes/addr.html">addr</a></li><li class="chapter-item "><a href="cheatcodes/sign.html">sign</a></li><li class="chapter-item "><a href="cheatcodes/label.html">label</a></li></ol></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Foundry Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/onbjerg/foundry-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <img src="images/foundry-banner.png" style="border-radius: 20px">
<p>Foundry is a smart contract development toolchain. Foundry manages your dependencies, compiles your project, runs tests, deploys, and lets you interact with the chain from the command-line.</p>
<blockquote>
<p>📖 <strong>Contributing</strong></p>
<p>You can contribute to this book on <a href="https://github.com/onbjerg/foundry-book">GitHub</a>.</p>
</blockquote>
<h3 id="sections"><a class="header" href="#sections">Sections</a></h3>
<p><strong><a href="getting-started/installation.html">Getting Started</a></strong></p>
<p>To get started with Foundry, install Foundry and set up your first project.</p>
<p><strong><a href="projects/creating-a-new-project.html">Projects</a></strong></p>
<p>This section will give you an overview of how to create and work with existing projects.</p>
<p><strong><a href="forge">Forge Overview</a></strong></p>
<p>The overview will give you all you need to know about how to use <code>forge</code> to develop, test, and deploy smart contracts.</p>
<p><strong><a href="cast">Cast Overview</a></strong></p>
<p>Learn how to use <code>cast</code> to interact with smart contracts, send transactions, and get chain data from the command-line.</p>
<p><strong>Configuration</strong></p>
<p>Guides on configuring Foundry.</p>
<ul>
<li><a href="./config">Configuring with <code>foundry.toml</code></a></li>
<li><a href="./config/continous-integration.html">Continuous Integration</a></li>
<li><a href="./config/vscode.html">Integrating with VSCode</a></li>
<li><a href="./config/shell-autocompletion.html">Shell Autocompletion</a></li>
</ul>
<p><strong>Tutorials</strong></p>
<p>Tutorials on building smart contracts with Foundry.</p>
<ul>
<li><a href="./tutorials/solmate-nft.html">Creating an NFT with Solmate</a></li>
<li><a href="">Incremental Adoption</a></li>
</ul>
<p><strong>Appendix</strong></p>
<p>References, troubleshooting and more.</p>
<ul>
<li><a href=""><code>forge</code> Reference</a></li>
<li><a href="./reference/cast.html"><code>cast</code> Reference</a></li>
<li><a href="./reference/config.html"><code>foundry.toml</code> Reference</a></li>
<li><a href="./reference/ds-test.html"><code>ds-test</code> Reference</a></li>
<li><a href="./cheatcodes">Cheatcodes Reference</a></li>
</ul>
<blockquote>
<p>You can also check out <a href="https://github.com/crisgarner/awesome-foundry">Awesome Foundry</a>, a curated list of awesome Foundry resources, tutorials, tools and libraries!</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<h3 id="using-foundryup"><a class="header" href="#using-foundryup">Using <code>foundryup</code></a></h3>
<p>The easiest way to get Foundry is to install the latest release by using <code>foundryup</code>.</p>
<p>On Linux and macOS systems, this is done as follows:</p>
<pre><code class="language-sh">curl -L https://foundry.paradigm.xyz | bash
</code></pre>
<p>This will download <code>foundryup</code>. To start install Foundry, run:</p>
<pre><code class="language-sh">foundryup
</code></pre>
<p>If everything goes well, you will now have two binaries at your disposal: <code>forge</code> and <code>cast</code>.</p>
<p>On Windows, build from source.</p>
<p>Running <code>foundryup</code> again will update to the latest Foundry release. You can also revert to a specific version of Foundry with <code>foundryup -v $VERSION</code>.</p>
<h3 id="building-from-source"><a class="header" href="#building-from-source">Building from source</a></h3>
<p>To build from source, you need to get <a href="https://rust-lang.org">Rust</a> and Cargo. The easiest way to get both is by using <code>rustup</code>.</p>
<p>On Linux and macOS systems, this is done as follows:</p>
<pre><code class="language-sh">curl https://sh.rustup.rs -sSf | sh
</code></pre>
<p>It will download a script and start installation.</p>
<p>On Windows, download and run <code>rustup-init</code> from <a href="https://rustup.rs">rustup.rs</a>. It will start the installation in a console.</p>
<p>After this, run the following to build Foundry from source:</p>
<pre><code class="language-sh">cargo install --git https://github.com/gakonst/foundry --bins --locked
</code></pre>
<h3 id="using-with-docker"><a class="header" href="#using-with-docker">Using with Docker</a></h3>
<p>Foundry can also be used entirely within a Docker container. If you don't have it, Docker can be installed directly from <a href="https://docs.docker.com/get-docker/">Docker's website</a></p>
<p>Once installed, you can download the latest release by running:</p>
<pre><code class="language-sh">docker pull ghcr.io/gakonst/foundry:latest
</code></pre>
<p>It is also possible to build the docker image locally. From the Foundry repository, run:</p>
<pre><code class="language-sh">docker build -t foundry .
</code></pre>
<blockquote>
<p>ℹ️ <strong>Note</strong></p>
<p>Some machines (including those with M1 chips) may be unable to build the docker image locally. This is a known issue.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="first-steps-with-foundry"><a class="header" href="#first-steps-with-foundry">First Steps with Foundry</a></h2>
<p>This section provides an overview of the <code>forge</code> command line tool. We demonstrate how to create a new project, compile, and test it.</p>
<p>To start a new project with Foundry, use <code>forge init</code>:</p>
<pre><code class="language-sh">$ forge init hello_foundry
</code></pre>
<p>Let's check out what <code>forge</code> generated for us:</p>
<pre><code class="language-sh">$ cd hello_foundry
$ tree . -d -L 1
.
├── lib
└── src

2 directories
</code></pre>
<p>We can build the project:</p>
<pre><code class="language-sh">$ forge build
Compiling 3 files with 0.8.10
Compiler run successful
</code></pre>
<p>And run the tests:</p>
<pre><code class="language-sh">$ forge test
No files changed, compilation skipped

Running 1 test for src/test/Contract.t.sol:ContractTest
[PASS] testExample() (gas: 120)
Test result: ok. 1 passed; 0 failed; finished in 158.50µs
</code></pre>
<br>
<blockquote>
<p>💡 <strong>Tip</strong></p>
<p>You can always print help for any subcommand (or their subcommands) by adding <code>--help</code> at the end.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="creating-a-new-project"><a class="header" href="#creating-a-new-project">Creating a New Project</a></h2>
<p>To start a new project with Foundry, use <code>forge init</code>:</p>
<pre><code class="language-sh">$ forge init hello_foundry
</code></pre>
<p>This creates a new directory <code>hello_foundry</code> from the default template. This also initializes a new <code>git</code> repository.</p>
<p>If you want to create a new project using a different template, you would pass the <code>--template</code> flag, like so:</p>
<pre><code class="language-sh">$ forge init --template https://github.com/FrankieIsLost/forge-template hello_template
</code></pre>
<p>For now, let's check what the default template looks like:</p>
<pre><code class="language-sh">$ cd hello_foundry
$ tree . -d -L 1
.
├── lib
└── src

2 directories
</code></pre>
<p>The default template comes with one dependency installed: <code>ds-test</code>. This is the preferred assertion library used for Foundry projects. Additionally, the template also comes with an empty starter contract and a simple test.</p>
<p>Let's build the project:</p>
<pre><code class="language-sh">$ forge build
Compiling 3 files with 0.8.10
Compiler run successful
</code></pre>
<p>And run the tests:</p>
<pre><code class="language-sh">$ forge test
No files changed, compilation skipped

Running 1 test for src/test/Contract.t.sol:ContractTest
[PASS] testExample() (gas: 120)
Test result: ok. 1 passed; 0 failed; finished in 158.50µs
</code></pre>
<p>You'll notice that two new directories have popped up: <code>out</code> and <code>cache</code>.</p>
<p>The <code>out</code> directory contains your contract artifact, such as the ABI, while the <code>cache</code> is used by <code>forge</code> to only recompile what is necessary.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="working-on-an-existing-project"><a class="header" href="#working-on-an-existing-project">Working on an Existing Project</a></h2>
<p>If you download an existing project that uses Foundry, it is really easy to get going.</p>
<p>First, get the project from somewhere. In this example, we will clone the <code>forge-std</code> repository from GitHub:</p>
<pre><code class="language-sh">$ git clone https://github.com/brockelmore/forge-std
$ forge install
</code></pre>
<p>We run <code>forge install</code> to install the submodule dependencies that are in the project.</p>
<p>To build, use <code>forge build</code>:</p>
<pre><code class="language-sh">$ forge build
Compiling 7 files with 0.8.10
Compiler run successful
</code></pre>
<p>And to test, use <code>forge test</code>:</p>
<pre><code class="language-sh">$ forge test
No files changed, compilation skipped

Running 27 tests for src/test/StdStorage.t.sol:StdStorageTest
[PASS] testFailStorageCheckedWriteMapPacked() (gas: 122431)
[PASS] testFailStorageConst() (gas: 74053)
[PASS] testFailStorageNativePack() (gas: 295893)
[PASS] testStorageCheckedWriteDeepMap() (gas: 166648)
[PASS] testStorageCheckedWriteDeepMapStructA() (gas: 180590)
[PASS] testStorageCheckedWriteDeepMapStructB() (gas: 209856)
[PASS] testStorageCheckedWriteHidden() (gas: 110775)
[PASS] testStorageCheckedWriteMapAddr() (gas: 146848)
[PASS] testStorageCheckedWriteMapBool() (gas: 146991)
[PASS] testStorageCheckedWriteMapPackedSuccess() (gas: 146514)
[PASS] testStorageCheckedWriteMapStructA() (gas: 160635)
[PASS] testStorageCheckedWriteMapStructB() (gas: 189702)
[PASS] testStorageCheckedWriteMapUint() (gas: 146621)
[PASS] testStorageCheckedWriteObvious() (gas: 93735)
[PASS] testStorageCheckedWriteStructA() (gas: 123086)
[PASS] testStorageCheckedWriteStructB() (gas: 150764)
[PASS] testStorageDeepMap() (gas: 150884)
[PASS] testStorageDeepMapStructA() (gas: 164604)
[PASS] testStorageDeepMapStructB() (gas: 193834)
[PASS] testStorageHidden() (gas: 96539)
[PASS] testStorageMapAddrFound() (gas: 131685)
[PASS] testStorageMapStructA() (gas: 145148)
[PASS] testStorageMapStructB() (gas: 174264)
[PASS] testStorageMapUintFound() (gas: 131548)
[PASS] testStorageObvious() (gas: 79439)
[PASS] testStorageStructA() (gas: 108537)
[PASS] testStorageStructB() (gas: 136197)
Test result: ok. 27 passed; 0 failed; finished in 3.23ms

Running 11 tests for src/test/StdError.t.sol:StdErrorsTest
[PASS] testExpectArithmetic() (gas: 8957)
[PASS] testExpectAssertion() (gas: 8794)
[PASS] testExpectDiv() (gas: 8893)
[PASS] testExpectEncodeStg() (gas: 31050)
[PASS] testExpectEnum() (gas: 8835)
[PASS] testExpectIntern() (gas: 8808)
[PASS] testExpectLowLvl() (gas: 10582)
[PASS] testExpectMem() (gas: 8851)
[PASS] testExpectMod() (gas: 8903)
[PASS] testExpectOOB() (gas: 8848)
[PASS] testExpectPop() (gas: 10851)
Test result: ok. 11 passed; 0 failed; finished in 3.94ms

Running 10 tests for src/test/StdCheats.t.sol:StdCheatsTest
[PASS] testDeployCode() (gas: 2530021)
[PASS] testDeployCodeNoArgs() (gas: 2500399)
[PASS] testHoax() (gas: 15633)
[PASS] testHoaxDifferentAddresses() (gas: 15818)
[PASS] testHoaxOrigin() (gas: 15644)
[PASS] testRewind() (gas: 3703)
[PASS] testSkip() (gas: 3618)
[PASS] testStartHoax() (gas: 24268)
[PASS] testStartHoaxOrigin() (gas: 24318)
[PASS] testTip() (gas: 259100)
Test result: ok. 10 passed; 0 failed; finished in 4.69ms
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>Forge manages dependencies using <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodules</a> by default, which means that it works with any GitHub repository that contains smart contracts.</p>
<h3 id="adding-a-dependency"><a class="header" href="#adding-a-dependency">Adding a dependency</a></h3>
<p>To add a dependency, run <code>forge install</code>:</p>
<pre><code class="language-sh">$ forge install Rari-Capital/solmate
Installing solmate in &quot;/tmp/tmp.XSpxpf4Ncn/deps/lib/solmate&quot;, (url: https://github.com/Rari-Capital/solmate, tag: None)
    Installed solmate
</code></pre>
<p>If we now check the <code>lib</code> folder:</p>
<pre><code class="language-sh">$ tree lib -L 1
lib
├── ds-test
├── solmate
└── weird-erc20

3 directories, 0 files
</code></pre>
<p>We can see that Forge installed <code>solmate</code>!</p>
<p>By default, <code>forge install</code> installs the latest master branch version. If you want to install a specific tag or commit,you can do it like so:</p>
<pre><code class="language-sh">$ forge install Rari-Capital/solmate@v6
</code></pre>
<h3 id="remapping-dependencies"><a class="header" href="#remapping-dependencies">Remapping dependencies</a></h3>
<p>Forge can remap dependencies to make them easier to import. Forge will automatically try to deduce some remappings for you:</p>
<pre><code class="language-sh">$ forge remappings
solmate/=lib/solmate/src/
weird-erc20/=lib/weird-erc20/src/
ds-test/=lib/ds-test/src/
</code></pre>
<p>These remappings mean:</p>
<ul>
<li>To import from <code>solmate</code> we would write: <code>import &quot;solmate/Contract.sol&quot;;</code></li>
<li>To import from <code>weird-erc20</code> we would write: <code>import &quot;weird-erc20/Contract.sol&quot;;</code></li>
<li>To import from <code>ds-test</code> we would write: <code>import &quot;ds-test/Contract.sol&quot;;</code></li>
</ul>
<p>You can customize these remappings by creating a <code>remappings.txt</code> file in the root of your project.</p>
<p>Let's create a remapping called <code>solmate-utils</code> that points to the <code>utils</code> folder in the solmate repository!</p>
<pre><code class="language-sh">solmate-utils/=lib/solmate/src/utils/
</code></pre>
<p>Now we can import any of the contracts in <code>src/utils</code> of the solmate repository like so:</p>
<pre><code class="language-solidity">import &quot;solmate-utils/Contract.sol&quot;;
</code></pre>
<h3 id="updating-dependencies"><a class="header" href="#updating-dependencies">Updating dependencies</a></h3>
<p>You can update a specific dependency to the latest commit on the version you have specified using <code>forge update &lt;dep&gt;</code>. For example, if we wanted to pull the latest commit from our previously installed master-version of <code>solmate</code>, we would run:</p>
<pre><code class="language-sh">$ forge update lib/solmate
</code></pre>
<p>Alternatively, you can do this for all dependencies at once by just running <code>forge update</code>.</p>
<h3 id="removing-dependencies"><a class="header" href="#removing-dependencies">Removing dependencies</a></h3>
<p>You can remove dependencies using <code>forge remove &lt;deps&gt;...</code>, where <code>&lt;deps&gt;</code> is either the full path to the dependency or just the name. For example, to remove <code>ds-test</code> both of these commands are equivalent:</p>
<pre><code class="language-ignore">$ forge remove ds-test
# ... is equivalent to ...
$ forge remove lib/ds-test
</code></pre>
<h3 id="hardhat-compatibility"><a class="header" href="#hardhat-compatibility">Hardhat compatibility</a></h3>
<p>Forge also supports Hardhat-style projects where dependencies are npm packages (stored in <code>node_modules</code>) and contracts are stored in <code>contracts</code> as opposed to source.</p>
<p>To enable Hardhat compatibility mode pass the <code>--hh</code> flag.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="project-layout"><a class="header" href="#project-layout">Project Layout</a></h2>
<p>Forge is flexible on how you structure your project. By default, the structure is:</p>
<pre><code class="language-ignore">.
├── foundry.toml
├── lib
│   └── ds-test
│       ├── default.nix
│       ├── demo
│       ├── LICENSE
│       ├── Makefile
│       └── src
└── src
    ├── Contract.sol
    └── test
        └── Contract.t.sol

6 directories, 6 files
</code></pre>
<ul>
<li>You can configure Foundry's behavior using <code>foundry.toml</code>.</li>
<li>Remappings are specified in <code>remappings.txt</code>.</li>
<li>The default directory for contracts is <code>src/</code>.</li>
<li>The default directory for tests is <code>src/test/</code>, where any contract with a function that starts with <code>test</code> is considered to be a test.</li>
<li>Dependencies are stored as git submodules in <code>lib/</code>.</li>
</ul>
<p>You can configure where Forge looks for both dependencies and contracts using the <code>--lib-paths</code> and <code>--contracts</code> flags respectively. Alternatively you can configure it in <code>foundry.toml</code>.</p>
<p>Combined with remappings, this gives you the flexibility needed to support the project structure of other toolchains such as Hardhat and Truffle.</p>
<p>For automatic Hardhat support you can also pass the <code>--hh</code> flag, which sets the following flags: <code>--lib-paths node_modules --contracts contracts</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="overview-of-forge"><a class="header" href="#overview-of-forge">Overview of <code>forge</code></a></h2>
<p>Forge is a command-line tool that ships with Foundry. Forge tests, builds, and deploys your smart contracts.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tests"><a class="header" href="#tests">Tests</a></h2>
<p>Forge can run your tests with the <code>forge test</code> command. All tests are written in Solidity.</p>
<p>Forge will look for the tests anywhere in your source directory. Any contract with a function that starts with <code>test</code> is considered to be a test. Usually, tests will be placed in <code>src/test</code> by convention and end with <code>.t.sol</code>.</p>
<p>Here's an example of running <code>forge test</code> in a freshly created project, that only has the default test:</p>
<pre><code class="language-sh">$ forge test
No files changed, compilation skipped

Running 1 test for src/test/Contract.t.sol:ContractTest
[PASS] testExample() (gas: 120)
Test result: ok. 1 passed; 0 failed; finished in 158.50µs
</code></pre>
<p>You can also run specific tests by passing a filter:</p>
<pre><code class="language-sh">$ forge test --match-contract ComplicatedContractTest --match-test testDeposit
Compiling 3 files with 0.8.10
Compiler run successful

Running 2 tests for src/test/ComplicatedContract.t.sol:ComplicatedContractTest
[PASS] testDepositERC20() (gas: 102148)
[PASS] testDepositETH() (gas: 61392)
Test result: ok. 2 passed; 0 failed; finished in 337.42µs
</code></pre>
<p>This will run the tests in the <code>ComplicatedContractTest</code> test contract with <code>testDeposit</code> in the name.
Inverse versions of these flags also exist (<code>--no-match-contract</code> and <code>--no-match-test</code>).</p>
<p>You can run tests in filenames that match a regex with <code>--match-path</code>.</p>
<pre><code class="language-sh">$ forge test --match-path src/test/ContractB.t.sol
No files changed, compilation skipped

Running 1 test for src/test/ContractB.t.sol:ContractBTest
[PASS] testExample() (gas: 168)
Test result: ok. 1 passed; 0 failed; finished in 145.78µs
</code></pre>
<p>The inverse of the <code>--match-path</code> flag is <code>--no-match-path</code>.</p>
<h3 id="logs-and-traces"><a class="header" href="#logs-and-traces">Logs and traces</a></h3>
<p>The default behavior for <code>forge test</code> is to only display a summary of passing and failing tests. You can control this behavior by increasing the verbosity (using the <code>-v</code> flag). Each level of verbosity adds more information:</p>
<ul>
<li><strong>Level 2 (<code>-vv</code>)</strong>: Logs emitted during tests are also displayed.</li>
<li><strong>Level 3 (<code>-vvv</code>)</strong>: Stack traces for failing tests are also displayed.</li>
<li><strong>Level 4 (<code>-vvvv</code>)</strong>: Stack traces for all tests are displayed, and setup traces for failing tests are displayed.</li>
<li><strong>Level 5 (<code>-vvvvv</code>)</strong>: Stack traces and setup traces are always displayed.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="writing-tests"><a class="header" href="#writing-tests">Writing Tests</a></h2>
<p>Tests are written in Solidity. If the test function reverts, the test fails, otherwise it passes.</p>
<p>Let's go over the most common way of writing tests, using the <a href="https://github.com/dapphub/ds-test"><code>ds-test</code></a> library.</p>
<p><code>ds-test</code> provides basic logging and assertion functionality. To use it in your testing contract, import <code>ds-test/test.sol</code> and inherit from <code>DSTest</code>, like so:</p>
<pre><code class="language-solidity">import &quot;ds-test/test.sol&quot;;
</code></pre>
<p>Let's examine a basic test using <code>ds-test</code>:</p>
<pre><code class="language-solidity">pragma solidity 0.8.10;

import &quot;ds-test/test.sol&quot;;

contract ContractBTest is DSTest {
    uint256 testNumber;

    function setUp() public {
        testNumber = 42;
    }

    function testNumberIs42() public {
        assertEq(testNumber, 42);
    }

    function testFailUnderflow() public {
        testNumber -= 43;
    }

    function testFailSubtract43() public {
        testNumber -= 43;
    }
}
</code></pre>
<p>Forge uses the following keywords in tests:</p>
<ul>
<li><code>setUp</code>: An optional function invoked before each test case is run
<pre><code class="language-solidity">    function setUp() public {
    testNumber = 42;
}
</code></pre>
</li>
<li><code>test</code>: Functions prefixed with <code>test</code> are run as a test case
<pre><code class="language-solidity">    function testNumberIs42() public {
    assertEq(testNumber, 42);
}
</code></pre>
</li>
<li><code>testFail</code>: The inverse of the <code>test</code> prefix - if the function does not revert, the test fails
<pre><code class="language-solidity">    function testFailSubtract43() public {
    testNumber -= 43;
}
</code></pre>
A good practice is to use something like <code>testCannot</code> in combination with the <a href="forge/../cheatcodes/expect-revert.html"><code>expectRevert</code></a> cheatcode (cheatcodes are explained in greater detail in the following <a href="forge/./cheatcodes.html">section</a>). Now instead of using <code>testFail</code>, you know exactly what reverted:
<pre><code class="language-solidity">    function testCannotSubtract43() public {
    cheats.expectRevert(abi.encodeWithSignature(&quot;Panic(uint256)&quot;, 0x11));
    testNumber -= 43;
}
</code></pre>
</li>
</ul>
<br>
<p>Tests are deployed to <code>0xb4c79daB8f259C7Aee6E5b2Aa729821864227e84</code>. If you deploy a contract within your test, then <code>0xb4c...7e84</code> will be its deployer. If the contract deployed within a test gives special permissions to its deployer, such as <code>Ownable.sol</code>'s <code>onlyOwner</code> modifier, then the test contract <code>0xb4c...7e84</code> will have those permissions.</p>
<p>It is possible to use other testing libraries or roll your own. For example, if you find yourself lacking a special type of assertion, you could extend <code>ds-test</code>.</p>
<h3 id="shared-setups"><a class="header" href="#shared-setups">Shared setups</a></h3>
<p>It is possible to use shared setups by creating helper abstract contracts and inheriting them in your test contracts:</p>
<pre><code class="language-solidity">abstract contract HelperContract {
    address constant IMPORTANT_ADDRESS = 0x543d...;
    SomeContract someContract;
    constructor() {...}
    function testSomething() public {...}
}

contract MyContractTest is HelperContract {
    function setUp() public {
        someContract = new SomeContract(0, IMPORTANT_ADDRESS);
        ...
    }
}
</code></pre>
<br>
<blockquote>
<p>📚 <strong>Reference</strong></p>
<p>See the <a href="forge/../reference/ds-test.html"><code>ds-test</code> Reference</a> for a complete overview of the logging functionality and assertions in <code>ds-test</code>.</p>
</blockquote>
<blockquote>
<p>💡 <strong>Tip</strong></p>
<p>Use the <a href="forge/../cheatcodes/get-code.html"><code>getCode</code></a> cheatcode to deploy contracts with incompatible Solidity versions.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cheatcodes"><a class="header" href="#cheatcodes">Cheatcodes</a></h2>
<p>Most of the time, simply testing your smart contracts outputs isn't enough. To manipulate the state of the blockchain, as well as test for specific reverts and events, Foundry is shipped with a set of cheatcodes.</p>
<p>Cheatcodes allow you to change the block number, your identity, and more. They are invoked by calling specific functions on a specially designated address: <code>0x7109709ECfa91a80626fF3989D68f67F5b1DD12D</code>. If you are using <code>ds-test</code>, then this address is assigned in a constant named <code>HEVM_ADDRESS</code>.</p>
<p>Let's write a test for a smart contract that is only callable by its owner.</p>
<pre><code class="language-solidity">pragma solidity 0.8.10;

import &quot;ds-test/test.sol&quot;;

error Unauthorized();

contract OwnerUpOnly {
    address public immutable owner;
    uint256 public count;

    constructor() {
        owner = msg.sender;
    }

    function increment() external {
        if (msg.sender != owner) {
            revert Unauthorized();
        }
        count++;
    }
}

contract OwnerUpOnlyTest is DSTest {
    OwnerUpOnly upOnly;

    function setUp() public {
        upOnly = new OwnerUpOnly();
    }

    function testIncrementAsOwner() public {
        assertEq(upOnly.count(), 0);
        upOnly.increment();
        assertEq(upOnly.count(), 1);
    }
}
</code></pre>
<p>If we run <code>forge test</code> now, we will see that the test passes, since <code>OwnerUpOnlyTest</code> is the owner of <code>OwnerUpOnly</code>.</p>
<pre><code class="language-ignore">$ forge test
Compiling 3 files with 0.8.10
Compiler run successful

Running 1 test for src/test/OwnerUpOnly.t.sol:OwnerUpOnlyTest
[PASS] testIncrementAsOwner() (gas: 29332)
Test result: ok. 1 passed; 0 failed; finished in 233.70µs
</code></pre>
<p>Let's make sure that someone who is definitely not the owner can't increment the count:</p>
<pre><code class="language-solidity">interface CheatCodes {
    function prank(address) external;
}

contract OwnerUpOnlyTest is DSTest {
    OwnerUpOnly upOnly;

    // ...

    function testFailIncrementAsNotOwner() public {
        cheats.prank(address(0));
        upOnly.increment();
    }
}
</code></pre>
<p>If we run <code>forge test</code> now, we will see that all the test pass.</p>
<pre><code class="language-ignore">$ forge test
No files changed, compilation skipped

Running 2 tests for src/test/OwnerUpOnly.t.sol:OwnerUpOnlyTest
[PASS] testFailIncrementAsNotOwner() (gas: 10510)
[PASS] testIncrementAsOwner() (gas: 29332)
Test result: ok. 2 passed; 0 failed; finished in 247.79µs
</code></pre>
<p>The test passed because the <code>prank</code> cheatcode changed our identity to the zero address for the next call (<code>upOnly.increment()</code>). The test case passed since we used the <code>testFail</code> prefix, however, using <code>testFail</code> is considered an anti-pattern since it does not tell us anything about <em>why</em> <code>upOnly.increment()</code> reverted.</p>
<p>If we run the tests again with traces turned on, we can see that we reverted with the correct error message.</p>
<pre><code class="language-ignore">$ forge test -vvvv --match-test testFailIncrementAsNotOwner
No files changed, compilation skipped

Running 1 test for src/test/OwnerUpOnly.t.sol:OwnerUpOnlyTest
[PASS] testFailIncrementAsNotOwner() (gas: 10510)
Traces:
  [10510] OwnerUpOnlyTest::testFailIncrementAsNotOwner() 
    ├─ [0] VM::prank(0x0000000000000000000000000000000000000000) 
    │   └─ ← ()
    ├─ [247] 0xce71…c246::d09de08a() 
    │   └─ ← 0x82b42900
    └─ ← 0x82b42900

Test result: ok. 1 passed; 0 failed; finished in 204.44µs
</code></pre>
<p>To be sure in the future, let's make sure that we reverted because we are not the owner using the <code>expectRevert</code> cheatcode:</p>
<pre><code class="language-solidity">interface CheatCodes {
    function prank(address) external;
    function expectRevert(bytes4) external;
}

contract OwnerUpOnlyTest is DSTest {
    OwnerUpOnly upOnly;

    // ...

    // Notice that we replaced `testFail` with `test`
    function testIncrementAsNotOwner() public {
        cheats.expectRevert(Unauthorized.selector);
        cheats.prank(address(0));
        upOnly.increment();
    }
}
</code></pre>
<p>If we run <code>forge test</code> one last time, we see that the test still passes, but this time we are sure that it will always fail if we revert for any other reason.</p>
<pre><code class="language-ignore">$ forge test
No files changed, compilation skipped

Running 2 tests for src/test/OwnerUpOnly.t.sol:OwnerUpOnlyTest
[PASS] testIncrementAsNotOwner() (gas: 10882)
[PASS] testIncrementAsOwner() (gas: 29332)
Test result: ok. 2 passed; 0 failed; finished in 233.22µs
</code></pre>
<p>Another cheatcode that is perhaps not so intuitive is the <code>expectEmit</code> function. Before looking at <code>expectEmit</code>, we need to understand what an event is.</p>
<p>Events are inheritable members of contracts. When you emit an event, the arguments are stored on the blockchain. The <code>indexed</code> attribute can be added to a maximum of three parameters of an event to form a data structure known as a &quot;topic.&quot; Topics allow users to search for events on the blockchain.</p>
<pre><code class="language-solidity">pragma solidity 0.8.10;

import &quot;ds-test/test.sol&quot;;

interface CheatCodes {
    function expectEmit(
        bool,
        bool,
        bool,
        bool
    ) external;
}

contract EmitContractTest is DSTest {
    event Transfer(address indexed from, address indexed to, uint256 amount);
    CheatCodes constant cheats = CheatCodes(HEVM_ADDRESS);

    function testExpectEmit() public {
        ExpectEmit emitter = new ExpectEmit();
        // Check that topic 1, topic 2, and data are the same as the following emitted event.
        // Checking topic 3 here doesn't matter, because `Transfer` only has 2 indexed topics.
        cheats.expectEmit(true, true, false, true);
        // The event we expect
        emit Transfer(address(this), address(1337), 1337);
        // The event we get
        emitter.t();
    }

    function testExpectEmitDoNotCheckData() public {
        ExpectEmit emitter = new ExpectEmit();
        // Check topic 1 and topic 2, but do not check data
        cheats.expectEmit(true, true, false, false);
        // The event we expect
        emit Transfer(address(this), address(1337), 1338);
        // The event we get
        emitter.t();
    }
}

contract ExpectEmit {
    event Transfer(address indexed from, address indexed to, uint256 amount);

    function t() public {
        emit Transfer(msg.sender, address(1337), 1337);
    }
}
</code></pre>
<p>When we call <code>cheats.expectEmit(true, true, false, true);</code>, we want to check the 1st and 2nd <code>indexed</code> topic for the next event.</p>
<p>The expected <code>Transfer</code> event in <code>testExpectEmit()</code> means we are expecting that <code>from</code> is  <code>address(this)</code>, and <code>to</code> is <code>address(1337)</code>. This is compared against the event emitted from <code>emitter.t()</code>.</p>
<p>In other words, we are checking that the first topic from <code>emitter.t()</code> is equal to <code>address(this)</code>. The 3rd argument in <code>expectEmit</code> is set to <code>false</code> because there is no need to check the third topic in the <code>Transfer</code> event, since there are only two. It does not matter even if we set to <code>true</code>.</p>
<p>The 4th argument in <code>expectEmit</code> is set to <code>true</code>, which means that we want to check &quot;non-indexed topics&quot;, also known as data.</p>
<p>For example, we want the data from the expected event in <code>testExpectEmit</code> - which is <code>amount</code> - to equal to the data in the actual emitted event. In other words, we are asserting that <code>amount</code> emitted by <code>emitter.t()</code> is equal to <code>1337</code>. If the fourth argument in <code>expectEmit</code> was set to <code>false</code>, we would not check <code>amount</code>.</p>
<p>In other words, <code>testExpectEmitDoNotCheckData</code> is a valid test case, even though the amounts differ, since we do not check the data.</p>
<br>
<blockquote>
<p>📚 <strong>Reference</strong></p>
<p>See the <a href="forge/../cheatcodes">Cheatcodes Reference</a> for a complete overview of all the available cheatcodes.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="understanding-traces"><a class="header" href="#understanding-traces">Understanding Traces</a></h2>
<p>Forge can produce traces either for failing tests (<code>-vvv</code>) or all tests (<code>-vvvv</code>).</p>
<p>Traces follow the same general format:</p>
<pre><code class="language-ignore">  [&lt;Gas Usage&gt;] &lt;Contract&gt;::&lt;Function&gt;(&lt;Parameters&gt;)
    ├─ [&lt;Gas Usage&gt;] &lt;Contract&gt;::&lt;Function&gt;(&lt;Parameters&gt;)
    │   └─ ← &lt;Return Value&gt;
    └─ ← &lt;Return Value&gt;
</code></pre>
<p>Each trace can have many more subtraces, each denoting a call to a contract and a return value.</p>
<p>If your terminal supports color, the traces will also come with a variety of colors:</p>
<ul>
<li><strong>Green</strong>: For calls that do not revert</li>
<li><strong>Red</strong>: For reverting calls</li>
<li><strong>Blue</strong>: For calls to cheat codes</li>
<li><strong>Cyan</strong>: For emitted logs</li>
<li><strong>Yellow</strong>: For contract deployments</li>
</ul>
<p>The gas usage (marked in square brackets) is for the entirety of the function call. You may notice, however, that sometimes the gas usage of one trace does not exactly match the gas usage of all its subtraces:</p>
<pre><code class="language-ignore">  [24661] OwnerUpOnlyTest::testIncrementAsOwner()
    ├─ [2262] OwnerUpOnly::count()
    │   └─ ← 0
    ├─ [20398] OwnerUpOnly::increment()
    │   └─ ← ()
    ├─ [262] OwnerUpOnly::count()
    │   └─ ← 1
    └─ ← ()
</code></pre>
<p>The gas unaccounted for is due to some extra operations happening between calls, such as arithmetic and store reads/writes.</p>
<p>Forge will try to decode as many signatures and values as possible, but sometimes this is not possible. In these cases, the traces will appear like so:</p>
<pre><code class="language-ignore">  [&lt;Gas Usage&gt;] &lt;Address&gt;::&lt;Calldata&gt;
    └─ ← &lt;Return Data&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="forking-mode"><a class="header" href="#forking-mode">Forking mode</a></h2>
<p>Forge supports testing in a forked environment.</p>
<p>To run tests in a forked environment - such as a forked Ethereum mainnet - pass a RPC URL via the <code>--fork-url</code> flag:</p>
<pre><code class="language-bash">forge test --fork-url &lt;your_rpc_url&gt;
</code></pre>
<p>The following values are changed to reflect those of the chain at the moment of forking:</p>
<ul>
<li><a href="forge/../reference/config.html#block_number"><code>block_number</code></a></li>
<li><a href="forge/../reference/config.html#chain_id"><code>chain_id</code></a></li>
<li><a href="forge/../reference/config.html#gas_limit"><code>gas_limit</code></a></li>
<li><a href="forge/../reference/config.html#gas_price"><code>gas_price</code></a></li>
<li><a href="forge/../reference/config.html#block_base_fee_per_gas"><code>block_base_fee_per_gas</code></a></li>
<li><a href="forge/../reference/config.html#block_coinbase"><code>block_coinbase</code></a></li>
<li><a href="forge/../reference/config.html#block_timestamp"><code>block_timestamp</code></a></li>
<li><a href="forge/../reference/config.html#block_difficulty"><code>block_difficulty</code></a></li>
</ul>
<p>It is possible to specify a block from which to fork with <code>--fork-block-number</code>:</p>
<pre><code class="language-bash">forge test --fork-url &lt;your_rpc_url&gt; --fork-block-number 1
</code></pre>
<p>Forking is especially useful when you need to interact with existing contracts, and you may choose to do integration testing this way, as if you were on an actual network.</p>
<h3 id="caching"><a class="header" href="#caching">Caching</a></h3>
<p>If both <code>--fork-url</code> and <code>--fork-block-number</code> are specified, then data for that block is cached for future test runs.</p>
<p>The data is cached in <code>$HOME/.foundry/cache/&lt;chain id&gt;/&lt;block number&gt;</code>. To clear the cache, simply remove the directory.</p>
<p>It is also possible to ignore the cache entirely by passing <code>--no-storage-caching</code>, or with <code>foundry.toml</code> by configuring <a href="forge/../reference/config.html#no_storage_caching"><code>no_storage_caching</code></a> and <a href="forge/../reference/config.html#rpc_storage_caching"><code>rpc_storage_caching</code></a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="advanced-testing"><a class="header" href="#advanced-testing">Advanced Testing</a></h2>
<p>Forge comes with a number of advanced testing methods:</p>
<ul>
<li><a href="forge/./fuzz-testing.html">Fuzz Testing</a></li>
</ul>
<p>In the future, Forge will also support these:</p>
<ul>
<li><a href="forge/advanced-testing.html#">Invariant Testing</a></li>
<li><a href="forge/advanced-testing.html#">Symbolic Execution</a></li>
<li><a href="forge/advanced-testing.html#">Mutation Testing</a></li>
</ul>
<p>Each chapter dives into what problem the testing methods solve, and how to apply them to your own project.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="fuzz-testing"><a class="header" href="#fuzz-testing">Fuzz Testing</a></h2>
<p>Forge supports property based testing.</p>
<p>Property-based testing is a way of testing general behaviors as opposed to isolated scenarios.</p>
<p>Let's examine what that means by writing a unit test, finding the general property we are testing for, and converting it to a property-based test instead:</p>
<pre><code class="language-solidity">pragma solidity 0.8.10;

import &quot;ds-test/test.sol&quot;;

contract Safe {
    receive() external payable {}

    function withdraw() external {
        payable(msg.sender).transfer(address(this).balance);
    }
}

contract SafeTest is DSTest {
    Safe safe;

    // Needed so the test contract itself can receive ether
    // when withdrawing
    receive() external payable {}

    function setUp() public {
        safe = new Safe();
    }

    function testWithdraw() public {
        payable(address(safe)).transfer(1 ether);
        uint256 preBalance = address(this).balance;
        safe.withdraw();
        uint256 postBalance = address(this).balance;
        assertEq(preBalance + 1 ether, postBalance);
    }
}
</code></pre>
<p>Running the test, we see it passes:</p>
<pre><code class="language-sh">$ forge test
Compiling 2 files with 0.8.10
Compiler run successful

Running 1 test for src/test/Safe.t.sol:SafeTest
[PASS] testWithdraw() (gas: 19505)
Test result: ok. 1 passed; 0 failed; finished in 208.41µs
</code></pre>
<p>This unit test <em>does test</em> that we can withdraw ether from our safe. However, who is to say that it works for all amounts, not just 1 ether?</p>
<p>The general property here is: given a safe balance, when we withdraw, we should get whatever is in the safe.</p>
<p>Forge will run any test that takes at least one parameter as a property-based test, so let's rewrite:</p>
<pre><code class="language-solidity">contract SafeTest is DSTest {
    // ...

    function testWithdraw(uint256 amount) public {
        payable(address(safe)).transfer(amount);
        uint256 preBalance = address(this).balance;
        safe.withdraw();
        uint256 postBalance = address(this).balance;
        assertEq(preBalance + amount, postBalance);
    }
}
</code></pre>
<p>If we run the test now, we can see that Forge runs the property-based test, but it fails for high values of <code>amount</code>:</p>
<pre><code class="language-sh">$ forge test
Compiling 1 files with 0.8.10
Compiler run successful

Running 1 test for src/test/Safe.t.sol:SafeTest
[FAIL. Counterexample: calldata=0x215a2f20ffffffffffffffffffffffff0000000000000000000000000000000000000000, args=[115792089237316195423570985007226406215939081747436879206741300988257197096960]] testWithdraw(uint256) (runs: 1, μ: 6173, ~: 6173)
Test result: FAILED. 0 passed; 1 failed; finished in 290.00µs
</code></pre>
<p>The default amount of ether that the test contract is given is <code>2**96 wei</code> (as in DappTools), so we have to restrict the type of amount to <code>uint96</code> to make sure we don't try to send more than we have:</p>
<pre><code class="language-solidity">    function testWithdraw(uint96 amount) public {
</code></pre>
<p>And now it passes:</p>
<pre><code class="language-sh">$ forge test
Compiling 1 files with 0.8.10
Compiler run successful

Running 1 test for src/test/Safe.t.sol:SafeTest
[PASS] testWithdraw(uint96) (runs: 256, μ: 14642, ~: 19667)
Test result: ok. 1 passed; 0 failed; finished in 10.16ms
</code></pre>
<p>You may want to exclude certain cases using the <a href="forge/../reference/cheatcodes.html#assume"><code>assume</code></a> cheatcode. In those cases, fuzzer will discard the inputs and start a new fuzz run:</p>
<pre><code class="language-solidity">function testWithdraw(uint96 amount) public {
    cheats.assume(amount &gt; 0.1 ether)
    // snip
}
</code></pre>
<p>There are different ways to run property-based tests, notably parametric testing and fuzzing. Forge only supports fuzzing.</p>
<h3 id="interpreting-results"><a class="header" href="#interpreting-results">Interpreting results</a></h3>
<p>You might have noticed that fuzz tests are summarized a bit differently compared to unit tests:</p>
<ul>
<li>&quot;runs&quot; refers to the amount of scenarios the fuzzer tested. By default, the fuzzer will generate 256 scenarios, however, this can be configured using the <a href="forge/../reference/config.html#fuzz_runs"><code>FOUNDRY_FUZZ_RUNS</code></a> environment variable.</li>
<li>&quot;μ&quot; (Greek letter mu) is the mean gas used across all fuzz runs</li>
<li>&quot;~&quot; (tilde) is the median gas used across all fuzz runs</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="deploying"><a class="header" href="#deploying">Deploying</a></h2>
<p>Forge can deploy smart contracts to a given network with the <code>forge create</code> command.</p>
<p>Forge can deploy only one contract at a time.</p>
<p>To deploy a contract, you must provide a RPC URL (env: <code>ETH_RPC_URL</code>) and the private key of the account that will deploy the contract.</p>
<p>To deploy <code>MyContract</code> to a network:</p>
<pre><code class="language-sh">$ forge create --rpc-url &lt;your_rpc_url&gt; --private-key &lt;your_private_key&gt; src/MyContract.sol:MyContract
compiling...
success.
Deployer: 0xa735b3c25f...
Deployed to: 0x4054415432...
Transaction hash: 0x6b4e0ff93a...
</code></pre>
<p>Solidity files may contain multiple contracts. <code>:MyContract</code> above specifies which contract to deploy from the <code>src/MyContract.sol</code> file.</p>
<p>Use the <code>--constructor-args</code> flag to pass arguments to the constructor:</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.0;

import {ERC20} from &quot;solmate/tokens/ERC20.sol&quot;;

contract MyToken is ERC20 {
    constructor(
        string memory name,
        string memory symbol,
        uint8 decimals,
        uint256 initialSupply
    ) ERC20(name, symbol, decimals) {
        _mint(msg.sender, initialSupply);
    }
}
</code></pre>
<pre><code class="language-sh">$ forge create --rpc-url &lt;your_rpc_url&gt; --constructor-args &quot;ForgeUSD&quot; &quot;FUSD&quot; 18 1000000000000000000000 --private-key &lt;your_private_key&gt; src/MyToken.sol:MyToken
</code></pre>
<h2 id="verifying"><a class="header" href="#verifying">Verifying</a></h2>
<p>You can verify a contract on Etherscan with the <code>forge verify-contract</code> command.</p>
<p>You must provide:</p>
<ul>
<li><a href="https://etherscan.io/solcversions">compiler version</a> used for build, with 8 hex digits from the commit version prefix (the commit will usually not be a nightly build)</li>
<li>the contract address</li>
<li>the path to the contract <code>&lt;path&gt;:&lt;contractname&gt;</code></li>
<li>your Etherscan API key (env: <code>ETHERSCAN_API_KEY</code>).</li>
</ul>
<p>Moreover, you may need to provide:</p>
<ul>
<li>the constructor arguments in the ABI-encoded format, if there are any</li>
<li>the number of optimizations, if the Solidity optimizer was activated</li>
<li>the <a href="https://evm-chainlist.netlify.app/">chain ID</a>, if the contract is not on Ethereum Mainnet</li>
</ul>
<p>Let's say you want to verify <code>MyToken</code> (see above). You set the <a href="forge/../reference/config.html#optimizer_runs">number of optimizations</a> to 1 million, compiled it with v0.8.10, and deployed it, as shown above, to the Kovan testnet (chain ID: 42). Note that <code>--num-of-optimizations</code> will default to 0 if not set on verification, while it defaults to 200 if not set on deployment, so make sure you pass <code>--num-of-optimizations 200</code> if you left the default compilation settings. </p>
<p>Here's how to verify it:</p>
<pre><code class="language-bash">$ forge verify-contract --chain-id 42 --num-of-optimizations 1000000 --constructor-args 000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000008466f72676555534400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044655534400000000000000000000000000000000000000000000000000000000 --compiler-version v0.8.10+commit.fc410830 &lt;the_contract_address&gt; src/MyToken.sol:MyToken &lt;your_etherscan_api_key&gt;
Submitted contract for verification:
                Response: `OK`
                GUID: `a6yrbjp5prvakia6bqp5qdacczyfhkyi5j1r6qbds1js41ak1a`
                url: https://kovan.etherscan.io//address/0x6a54…3a4c#code
</code></pre>
<p>You can check verification status with the <code>forge verify-check</code> command:</p>
<pre><code class="language-bash">$ forge verify-check --chain-id 42 &lt;GUID&gt; &lt;your_etherscan_api_key&gt;
Contract successfully verified.
</code></pre>
<br>
<blockquote>
<p>💡 <strong>Tip</strong></p>
<p>Use Cast's <a href="forge/../reference/cast.html#abi-encode"><code>abi-encode</code></a> to ABI-encode arguments.</p>
<p>In this example, we ran <code>cast abi-encode &quot;constructor(string,string,uint8,uint256)&quot; &quot;ForgeUSD&quot; &quot;FUSD&quot; 18 1000000000000000000000</code> to ABI-encode the arguments.</p>
</blockquote>
<br>
<h3 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h3>
<h5 id="invalid-character-x-at-position-1"><a class="header" href="#invalid-character-x-at-position-1"><code>Invalid character 'x' at position 1</code></a></h5>
<p>Make sure the private key string does not begin with <code>0x</code>.</p>
<h5 id="eip-1559-not-activated"><a class="header" href="#eip-1559-not-activated"><code>EIP-1559 not activated</code></a></h5>
<p>EIP-1559 is not supported or not activated on the RPC server. Pass the <code>--legacy</code> flag to use legacy transactions instead of the EIP-1559 ones. If you do development in a local environment, you can use Hardhat instead of Ganache.</p>
<h5 id="failed-to-parse-tokens"><a class="header" href="#failed-to-parse-tokens"><code>Failed to parse tokens</code></a></h5>
<p>Make sure the passed arguments are of correct type.</p>
<h5 id="signature-error"><a class="header" href="#signature-error"><code>Signature error</code></a></h5>
<p>Make sure the private key is correct.</p>
<h5 id="compiler-version-commit-for-verify"><a class="header" href="#compiler-version-commit-for-verify"><code>Compiler version commit for verify</code></a></h5>
<p>If you want to check the exact commit you are running locally, try: <code> ~/.svm/0.x.y/solc-0.x.y --version</code> where <code>x</code> and
<code>y</code> are major and minor version numbers respectively.  The output of this will be something like:</p>
<pre><code class="language-ignore">solc, the solidity compiler commandline interface
Version: 0.8.12+commit.f00d7308.Darwin.appleclang
</code></pre>
<p>Note: You cannot just paste the entire string &quot;0.8.12+commit.f00d7308.Darwin.appleclang&quot; as the argument for the compiler-version.  But you can use the 8 hex digits of the commit to look up exactly what you should copy and paste from <a href="https://etherscan.io/solcversions">compiler version</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="gas-reports"><a class="header" href="#gas-reports">Gas Reports</a></h2>
<p>Forge can produce gas reports for your contracts. You can configure which contracts output gas reports via the <code>gas_reports</code> field in <code>foundry.toml</code>.</p>
<p>To produce reports for specific contracts:</p>
<pre><code class="language-toml">gas_reports = [&quot;MyContract&quot;, &quot;MyContractFactory&quot;]
</code></pre>
<p>To produce reports for all contracts:</p>
<pre><code class="language-toml">gas_reports = [&quot;*&quot;]
</code></pre>
<p>To generate gas reports, run <code>forge test --gas-report</code>.</p>
<p>You can also use it in combination with other subcommands, such as <code>forge test --match-test testBurn --gas-report</code>, to generate only a gas report relevant to this test.</p>
<p>Example output:</p>
<pre><code class="language-ignore">╭───────────────────────┬─────────────────┬────────┬────────┬────────┬─────────╮
│ MockERC1155 contract  ┆                 ┆        ┆        ┆        ┆         │
╞═══════════════════════╪═════════════════╪════════╪════════╪════════╪═════════╡
│ Deployment Cost       ┆ Deployment Size ┆        ┆        ┆        ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 1082720               ┆ 5440            ┆        ┆        ┆        ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ Function Name         ┆ min             ┆ avg    ┆ median ┆ max    ┆ # calls │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ balanceOf             ┆ 596             ┆ 596    ┆ 596    ┆ 596    ┆ 44      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ balanceOfBatch        ┆ 2363            ┆ 4005   ┆ 4005   ┆ 5647   ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ batchBurn             ┆ 2126            ┆ 5560   ┆ 2584   ┆ 11970  ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ batchMint             ┆ 2444            ┆ 135299 ┆ 125081 ┆ 438531 ┆ 18      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ burn                  ┆ 814             ┆ 2117   ┆ 2117   ┆ 3421   ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ isApprovedForAll      ┆ 749             ┆ 749    ┆ 749    ┆ 749    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ mint                  ┆ 26039           ┆ 31943  ┆ 27685  ┆ 118859 ┆ 22      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ safeBatchTransferFrom ┆ 2561            ┆ 137750 ┆ 126910 ┆ 461304 ┆ 8       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ safeTransferFrom      ┆ 1335            ┆ 34505  ┆ 28103  ┆ 139557 ┆ 9       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setApprovalForAll     ┆ 24485           ┆ 24485  ┆ 24485  ┆ 24485  ┆ 12      │
╰───────────────────────┴─────────────────┴────────┴────────┴────────┴─────────╯
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="debugger"><a class="header" href="#debugger">Debugger</a></h2>
<p>Forge ships with an interactive debugger.</p>
<p>The debugger is accessible on <code>forge run</code> and on <code>forge test</code>.</p>
<p>Using <code>forge test</code>:</p>
<pre><code class="language-sh">$ forge test --debug $FUNC
</code></pre>
<p>Where <code>$FUNC</code> is the signature of the function you want to debug. For example:</p>
<pre><code class="language-sh">$ forge test --debug &quot;testSomething&quot;
</code></pre>
<p>If you have multiple contracts with the same function name, you need to limit the matching functions down to only one case using <code>--match-patch</code> and <code>--match-contract</code>.</p>
<p>If the matching test is a fuzz test, the debugger will open the first failing fuzz scenario, or the last successful one, whichever comes first.</p>
<p>Using <code>forge run</code>:</p>
<pre><code class="language-sh">$ forge run --debug $FILE --sig $FUNC
</code></pre>
<p>Where <code>$FILE</code> is the path to the contract you want to debug, and <code>$FUNC</code> is the signature of the function you want to debug. For example:</p>
<pre><code class="language-sh">$ forge run --debug src/SomeContract.sol --sig &quot;myFunc(uint256,string)&quot; 123 &quot;hello&quot;
</code></pre>
<p>You can also specify raw calldata using <code>--sig</code> instead of a function signature.</p>
<p>If your source file contains more than one contract, specify the contract you want to debug using the <code>--target-contract</code> flag.</p>
<h3 id="debugger-layout"><a class="header" href="#debugger-layout">Debugger layout</a></h3>
<p><img src="forge/../images/debugger.png" alt="An image of the debugger UI" /></p>
<p>When the debugger is run, you are presented with a terminal divided into four quadrants:</p>
<ul>
<li><strong>Quadrant 1</strong>: The opcodes in the debugging session, with the current opcode highlighted. Additionally, the address of the current account, the program counter and the accumulated gas usage is also displayed</li>
<li><strong>Quadrant 2</strong>: The current stack, as well as the size of the stack</li>
<li><strong>Quadrant 3</strong>: The source view</li>
<li><strong>Quadrant 4</strong>: The current memory of the EVM</li>
</ul>
<p>As you step through your code, you will notice that the words in the stack and memory sometimes change color.</p>
<p>For the memory:</p>
<ul>
<li><strong>Red words</strong> are about to be written to by the current opcode</li>
<li><strong>Green words</strong> were written to by the previous opcode</li>
<li><strong>Cyan words</strong> are being read by the current opcode</li>
</ul>
<p>For the stack, <strong>cyan words</strong> are either being read or popped by the current opcode.</p>
<h3 id="navigating"><a class="header" href="#navigating">Navigating</a></h3>
<h3 id="general"><a class="header" href="#general">General</a></h3>
<ul>
<li><kbd>q</kbd>: Quit the debugger</li>
</ul>
<h3 id="navigating-calls"><a class="header" href="#navigating-calls">Navigating calls</a></h3>
<ul>
<li><kbd>0-9</kbd> + <kbd>k</kbd>: Step a number of times backwards (alternatively scroll up with your mouse)</li>
<li><kbd>0-9</kbd> + <kbd>j</kbd>: Step a number of times forwards (alternatively scroll down with your mouse)</li>
<li><kbd>g</kbd>: Move to the beginning of the transaction</li>
<li><kbd>G</kbd>: Move to the end of the transaction</li>
<li><kbd>c</kbd>: Move to the previous call-type instruction (i.e. <a href="https://www.evm.codes/#f1"><code>CALL</code></a>, <a href="https://www.evm.codes/#fa"><code>STATICCALL</code></a>, <a href="https://www.evm.codes/#f4"><code>DELEGATECALL</code></a>, and <a href="https://www.evm.codes/#f2"><code>CALLCODE</code></a>).</li>
<li><kbd>C</kbd>: Move to the next call-type instruction</li>
<li><kbd>a</kbd>: Move to the previous <a href="https://www.evm.codes/#f1"><code>JUMP</code></a> or <a href="https://www.evm.codes/#57"><code>JUMPI</code></a> instruction</li>
<li><kbd>s</kbd>: Move to the next <a href="https://www.evm.codes/#5b"><code>JUMPDEST</code></a> instruction</li>
</ul>
<h3 id="navigating-memory"><a class="header" href="#navigating-memory">Navigating memory</a></h3>
<ul>
<li><kbd>Ctrl</kbd> + <kbd>j</kbd>: Scroll the memory view down</li>
<li><kbd>Ctrl</kbd> + <kbd>k</kbd>: Scroll the memory view up</li>
<li><kbd>t</kbd>: Show labels on the stack to see what items the current op will consume</li>
</ul>
<h3 id="navigating-the-stack"><a class="header" href="#navigating-the-stack">Navigating the stack</a></h3>
<ul>
<li><kbd>J</kbd>: Scroll the stack view down</li>
<li><kbd>K</kbd>: Scroll the stack view up</li>
<li><kbd>m</kbd>: Show memory as UTF8</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="overview-of-cast"><a class="header" href="#overview-of-cast">Overview of <code>cast</code></a></h2>
<p><code>cast</code> is Foundry's command-line tool for performing Ethereum RPC calls. You can make smart contract calls, send transactions, or retrieve any type of chain data - all from your command-line!</p>
<h3 id="how-to-use-cast"><a class="header" href="#how-to-use-cast">How to use <code>cast</code></a></h3>
<p>To use <code>cast</code>, use the <code>cast</code> keyword followed by a subcommand:</p>
<pre><code class="language-bash">$ cast &lt;subcommand&gt;
</code></pre>
<h4 id="examples"><a class="header" href="#examples">Examples</a></h4>
<p>Let's use <code>cast</code> to retrieve the total supply of the DAI token:</p>
<pre><code class="language-bash">$ cast call 0x6b175474e89094c44da98b954eedeac495271d0f totalSupply()(uint256) --rpc-url https://eth-mainnet.alchemyapi.io/v2/Lc7oIGYeL_QvInzI0Wiu_pOZZDEKBrdf
9041556627146985339829335398
</code></pre>
<p><code>cast</code> also provides many convenient subcommands, such as for decoding calldata:</p>
<pre><code class="language-bash">$ cast 4byte-decode 0x1F1F897F676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
1) &quot;fulfillRandomness(bytes32,uint256)&quot;
0x676d000000000000000000000000000000000000000000000000000000000000
999
</code></pre>
<br>
<blockquote>
<p>📚 <strong>Reference</strong></p>
<p>See the <a href="cast/../reference/cast.html"><code>cast</code> Reference</a> for a complete overview of all the available subcommands.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="configuring-with-foundrytoml"><a class="header" href="#configuring-with-foundrytoml">Configuring with <code>foundry.toml</code></a></h2>
<p>Forge can be configured using a configuration file called <code>foundry.toml</code>, which is placed in the root of your project.</p>
<p>Configuration can be namespaced by profiles. The default profile is named <code>default</code>, from which all other profiles inherit. You are free to customize the <code>default</code> profile, and add as many new profiles as you need.</p>
<p>Additionally, you can create a global <code>foundry.toml</code> in your home directory.</p>
<p>Let's take a look at a configuration file that contains two profiles: the default profile, which always enables the optimizer, as well as a CI profile, that always displays traces:</p>
<pre><code class="language-toml">[default]
optimizer = true
optimizer_runs = 20000

[ci]
verbosity = 4
</code></pre>
<p>When running <code>forge</code>, you can specify the profile to use using the <code>FOUNDRY_PROFILE</code> environment variable.</p>
<br>
<blockquote>
<p>📚 <strong>Reference</strong></p>
<p>See the <a href="config/../reference/config.html"><code>foundry.toml</code> Reference</a> for a complete overview of what you can configure.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="continuous-integration"><a class="header" href="#continuous-integration">Continuous Integration</a></h2>
<h3 id="github-actions"><a class="header" href="#github-actions">GitHub Actions</a></h3>
<p>To test your project using GitHub Actions, here is a sample workflow:</p>
<pre><code class="language-yml">on: [push]

name: test

jobs:
  check:
    name: Foundry project
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: recursive

      - name: Install Foundry
        uses: onbjerg/foundry-toolchain@v1
        with:
          version: nightly

      - name: Run tests
        run: forge test -vvv
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="integrating-with-vscode"><a class="header" href="#integrating-with-vscode">Integrating with VSCode</a></h2>
<p>You can get Solidity support for Visual Studio Code by installing <a href="https://github.com/juanfranblanco/vscode-solidity">the VSCode Solidity extension</a>.</p>
<p>To make the extension play nice with Foundry, you will need to place your remappings in <code>remappings.txt</code>. If they are already in <code>foundry.toml</code>, copy them over and use <code>remappings.txt</code> instead. If you just use the autogenerated remappings that Foundry provides, run <code>forge remappings &gt; remappings.txt</code>.</p>
<p>If you use a non-standard project layout, you may have to add the following to your <code>.vscode/settings.json</code>:</p>
<pre><code class="language-json">{
  &quot;solidity.packageDefaultDependenciesContractsDirectory&quot;: &quot;src&quot;,
  &quot;solidity.packageDefaultDependenciesDirectory&quot;: &quot;lib&quot;
}
</code></pre>
<p>Where <code>src</code> is the source code directory and <code>lib</code> is your dependency directory.</p>
<p>It is also recommended to specify a Solidity compiler version:</p>
<pre><code class="language-json">&quot;solidity.compileUsingRemoteVersion&quot;: &quot;v0.8.10&quot;
</code></pre>
<p>To get Foundry in line with the chosen version, add the following to your <code>default</code> profile in <code>foundry.toml</code>.</p>
<pre><code class="language-toml">solc_version = &quot;0.8.10&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="shell-autocompletion"><a class="header" href="#shell-autocompletion">Shell Autocompletion</a></h2>
<p>You can generate autocompletion shell scripts for <code>bash</code>, <code>elvish</code>, <code>fish</code>, <code>powershell</code>, and <code>zsh</code>.</p>
<h3 id="zsh-oh-my-zsh"><a class="header" href="#zsh-oh-my-zsh">zsh (<code>oh-my-zsh</code>)</a></h3>
<p>First, ensure that the following is present somewhere in your <code>~/.zshrc</code> file (if not, add it):</p>
<pre><code class="language-sh">autoload -U compinit
compinit -i
</code></pre>
<p>Then run:</p>
<pre><code class="language-sh">mkdir -p $HOME/.oh-my-zsh/completions
forge completions zsh &gt; $HOME/.oh-my-zsh/completions/_forge
cast completions zsh &gt; $HOME/.oh-my-zsh/completions/_cast
source $HOME/.zshrc
</code></pre>
<h3 id="fish"><a class="header" href="#fish">fish</a></h3>
<pre><code class="language-sh">mkdir -p $HOME/.config/fish/completions
forge completions fish &gt; $HOME/.config/fish/completions/_forge.fish
cast completions fish &gt; $HOME/.config/fish/completions/_cast.fish
source $HOME/.config/fish/config.fish
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="creating-an-nft-with-solmate"><a class="header" href="#creating-an-nft-with-solmate">Creating an NFT with Solmate</a></h2>
<p>This tutorial walk you through creating an OpenSea compatible NFT with Foundry and <a href="https://github.com/Rari-Capital/solmate/blob/main/src/tokens/ERC721.sol">Solmate</a>. A full implementation of this tutorial can be found <a href="https://github.com/FredCoen/nft-tutorial">here</a>.</p>
<h5 id="this-tutorial-is-for-illustrative-purposes-only-and-provided-on-an-as-is-basis-the-tutorial-is-not-audited-nor-fully-tested-no-code-in-this-tutorial-should-be-used-in-a-production-environment"><a class="header" href="#this-tutorial-is-for-illustrative-purposes-only-and-provided-on-an-as-is-basis-the-tutorial-is-not-audited-nor-fully-tested-no-code-in-this-tutorial-should-be-used-in-a-production-environment">This tutorial is for illustrative purposes only and provided on an as-is basis. The tutorial is not audited nor fully tested. No code in this tutorial should be used in a production environment.</a></h5>
<h3 id="create-project-and-install-dependencies"><a class="header" href="#create-project-and-install-dependencies">Create project and install dependencies</a></h3>
<p>Start by setting up a Foundry project following the steps outlined in the <a href="tutorials/../getting-started/installation.html">Getting started section</a>. We will also install Solmate for their ERC721 implementation, as well as some OpenZeppelin utility libraries. Install the dependencies by running the following commands from the root of your project:</p>
<pre><code class="language-bash">forge install Rari-Capital/solmate Openzeppelin/openzeppelin-contracts brockelmore/forge-std
</code></pre>
<p>These dependencies will be added as git submodules to your project.</p>
<p>If you have followed the instructions correctly your project should be structured like this:</p>
<p><img src="tutorials/../images/nft-tutorial/nft-tutorial-project-structure.png" alt="Project structure" /></p>
<h3 id="implement-a-basic-nft"><a class="header" href="#implement-a-basic-nft">Implement a basic NFT</a></h3>
<p>We are then going to rename the boilerplate contract in <code>src/Contract.sol</code> to <code>src/NFT.sol</code> and replace the code:</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: UNLICENSED
pragma solidity 0.8.10;

import &quot;solmate/tokens/ERC721.sol&quot;;
import &quot;openzeppelin-contracts/contracts/utils/Strings.sol&quot;;

contract NFT is ERC721 {
    uint256 public currentTokenId;

    constructor(
        string memory _name,
        string memory _symbol
    ) ERC721(_name, _symbol) {}

    function mintTo(address recipient) public payable returns (uint256) {
        uint256 newItemId = ++currentTokenId;
        _safeMint(recipient, newItemId);
        return newItemId;
    }

    function tokenURI(uint256 id) public view virtual override returns (string memory) {
        return Strings.toString(id);
    }
}
</code></pre>
<p>Let's take a look at this very basic implementation of an NFT. We start by importing to contracts from our git submodules. We import solmate's gas optimised implementation of the ERC721 standard which our NFT contract will inherit from. Our constructor takes the <code>_name</code> and <code>_symbol</code> arguments for our NFT and passes them on to the constructor of the parent ERC721 implementation. Lastly we implement the <code>mintTo</code> function which allows anyone to mint an NFT. This function increments the <code>currentTokenId</code> and makes use of the <code>_safeMint</code> function of our parent contract.</p>
<h3 id="compile--deploy-with-forge"><a class="header" href="#compile--deploy-with-forge">Compile &amp; deploy with forge</a></h3>
<p>To compile the NFT contract run <code>forge build</code>. By default the compiler output will be in the <code>out</code> directory. To deploy our compiled contract with Forge we have to set environment variables for the RPC endpoint and the private key we want to use to deploy.</p>
<p>Set your environment variables by running:</p>
<pre><code class="language-bash">export RPC_URL=&lt;Your RPC endpoint&gt;
export PRIVATE_KEY=&lt;Your wallets private key&gt;
</code></pre>
<p>Once set, you can deploy your NFT with Forge by running the below command while adding the relevant constructor arguments to the NFT contract:</p>
<pre><code class="language-bash">forge create NFT --rpc-url=$RPC_URL --private-key=$PRIVATE_KEY --constructor-args &lt;name&gt; &lt;symbol&gt; 
</code></pre>
<p>If successfully deployed, you will see the deploying wallet's address, the contract's address as well as the transaction hash printed to your terminal.</p>
<h3 id="minting-nfts-from-your-contract"><a class="header" href="#minting-nfts-from-your-contract">Minting NFTs from your contract</a></h3>
<p>Calling functions on your NFT contract is made simple with Cast, Foundry's command-line tool for interacting with smart contracts, sending transactions, and getting chain data. Let's have a look at how we can use it to mint NFTs from our NFT contract.</p>
<p>Given that you already set your RPC and private key env variables during deployment, mint an NFT from your contract by
running:</p>
<pre><code class="language-bash">cast send --rpc-url=$RPC_URL &lt;contractAddress&gt;  &quot;mintTo(address)&quot; &lt;arg&gt; --private-key=$PRIVATE_KEY
</code></pre>
<p>Well done! You just minted your first NFT from your contract. You can sanity check the owner of the NFT with <code>currentTokenId</code> equal to <strong>1</strong> by running the below <code>cast call</code> command. The address you provided above should be returned as the owner.</p>
<pre><code class="language-bash">cast call --rpc-url=$RPC_URL --private-key=$PRIVATE_KEY &lt;contractAddress&gt; &quot;ownerOf(uint256)&quot; 1
</code></pre>
<h3 id="extending-our-nft-contract-functionality-and-testing"><a class="header" href="#extending-our-nft-contract-functionality-and-testing">Extending our NFT contract functionality and testing</a></h3>
<p>Let's extend our NFT by adding metadata to represent the content of our NFTs, as well as set a minting price, a maximum supply and the possibility to withdraw the collected proceeds from minting. To follow along you can replace your current NFT contract with the code snippet below:</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: UNLICENSED
pragma solidity &gt;=0.8.10;

import &quot;solmate/tokens/ERC721.sol&quot;;
import &quot;openzeppelin-contracts/contracts/utils/Strings.sol&quot;;
import &quot;openzeppelin-contracts/contracts/access/Ownable.sol&quot;;

error MintPriceNotPaid();
error MaxSupply();
error NonExistentTokenURI();
error WithdrawTransfer();

contract NFT is ERC721, Ownable {

    using Strings for uint256;
    string public baseURI;
    uint256 public currentTokenId;
    uint256 public constant TOTAL_SUPPLY = 10_000;
    uint256 public constant MINT_PRICE = 0.08 ether;

    constructor(
        string memory _name,
        string memory _symbol,
        string memory _baseURI
    ) ERC721(_name, _symbol) {
        baseURI = _baseURI;
    }

    function mintTo(address recipient) public payable returns (uint256) {
        if (msg.value != MINT_PRICE) {
            revert MintPriceNotPaid();
        }
        uint256 newTokenId = ++currentTokenId;
        if (newTokenId &gt; TOTAL_SUPPLY) {
            revert MaxSupply();
        }
        _safeMint(recipient, newTokenId);
        return newTokenId;
    }

    function tokenURI(uint256 tokenId)
        public
        view
        virtual
        override
        returns (string memory)
    {
        if (ownerOf[tokenId] == address(0)) {
            revert NonExistentTokenURI();
        }
        return
            bytes(baseURI).length &gt; 0
                ? string(abi.encodePacked(baseURI, tokenId.toString()))
                : &quot;&quot;;
    }

    function withdrawPayments(address payable payee) external onlyOwner {
        uint256 balance = address(this).balance;
        (bool transferTx, ) = payee.call{value: balance}(&quot;&quot;);
        if (!transferTx) {
            revert WithdrawTransfer();
        }
    }
}
</code></pre>
<p>Among other things, we have added metadata that can be queried from any front-end application like OpenSea, by calling the <code>tokenURI</code> method on our NFT contract.</p>
<blockquote>
<p><strong>Note</strong>: If you want to provide a real URL to the constructor at deployment, and host the metadata of this NFT contract please follow the steps outlined <a href="https://docs.opensea.io/docs/part-3-adding-metadata-and-payments-to-your-contract#intro-to-nft-metadata">here</a>.</p>
</blockquote>
<p>Let's test some of this added functionality to make sure it works as intended. Foundry offers an extremely fast EVM native testing framework through Forge.</p>
<p>Within your test folder rename the current <code>Contract.t.sol</code> test file to <code>NFT.t.sol</code>. This file will contain all tests regarding the NFT's <code>mintTo</code> method. Next, replace the existing boilerplate code with the below:</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: UNLICENSED
pragma solidity 0.8.10;

import &quot;ds-test/test.sol&quot;;
import &quot;forge-std/stdlib.sol&quot;;
import &quot;forge-std/Vm.sol&quot;;
import &quot;../NFT.sol&quot;;

contract NFTTest is DSTest {
    using stdStorage for StdStorage;

    Vm private vm = Vm(HEVM_ADDRESS);
    NFT private nft;
    StdStorage private stdstore;

    function setUp() public {
        // Deploy NFT contract
        nft = new NFT(&quot;NFT_tutorial&quot;, &quot;TUT&quot;, &quot;baseUri&quot;);
    }

    function testFailNoMintPricePaid() public {
        nft.mintTo(address(1));
    }

    function testMintPricePaid() public {
        nft.mintTo{value: 0.08 ether}(address(1));
    }

    function testFailMaxSupplyReached() public {
        uint256 slot = stdstore.target(address(nft)).sig(&quot;currentTokenId()&quot;).find();
        bytes32 loc = bytes32(slot);
        bytes32 mockedCurrentTokenId = bytes32(abi.encode(10000));
        vm.store(address(nft), loc, mockedCurrentTokenId);
        nft.mintTo{value: 0.08 ether}(address(1));
    }

    function testFailMintToZeroAddress() public {
        nft.mintTo{value: 0.08 ether}(address(0));
    }

    function testNewMintOwnerRegistered() public {
        nft.mintTo{value: 0.08 ether}(address(1));
        uint256 slotOfNewOwner = stdstore
            .target(address(nft))
            .sig(nft.ownerOf.selector)
            .with_key(1)
            .find();

        uint160 ownerOfTokenIdOne = uint160(uint256((vm.load(address(nft),bytes32(abi.encode(slotOfNewOwner))))));
        assertEq(address(ownerOfTokenIdOne), address(1));
    }

    function testBalanceIncremented() public { 
        nft.mintTo{value: 0.08 ether}(address(1));
        uint256 slotBalance = stdstore
            .target(address(nft))
            .sig(nft.balanceOf.selector)
            .with_key(address(1))
            .find();
        
        uint256 balanceFirstMint = uint256(vm.load(address(nft), bytes32(slotBalance)));
        assertEq(balanceFirstMint, 1);

        nft.mintTo{value: 0.08 ether}(address(1));
        uint256 balanceSecondMint = uint256(vm.load(address(nft), bytes32(slotBalance)));
        assertEq(balanceSecondMint, 2);
    }

    function testSafeContractReceiver() public {
        Receiver receiver = new Receiver();
        nft.mintTo{value: 0.08 ether}(address(receiver));
         uint256 slotBalance = stdstore
            .target(address(nft))
            .sig(nft.balanceOf.selector)
            .with_key(address(receiver))
            .find();

        uint256 balance = uint256(vm.load(address(nft), bytes32(slotBalance)));
        assertEq(balance, 1);
    }
    
    function testFailUnSafeContractReceiver() public {
        vm.etch(address(1), bytes(&quot;mock code&quot;));
        nft.mintTo{value: 0.08 ether}(address(1));
    }

    function testWithdrawalWorksAsOwner() public {
        // Mint an NFT, sending eth to the contract
        Receiver receiver = new Receiver();
        address payable payee = payable(address(0x1337));
        uint256 priorPayeeBalance = payee.balance;
        nft.mintTo{value: nft.MINT_PRICE()}(address(receiver));
        // Check that the balance of the contract is correct
        assertEq(address(nft).balance, nft.MINT_PRICE());
        uint256 nftBalance = address(nft).balance;
        // Withdraw the balance and assert it was transferred
        nft.withdrawPayments(payee);
        assertEq(payee.balance, priorPayeeBalance + nftBalance);
    }

    function testWithdrawalFailsAsNotOwner() public {
        // Mint an NFT, sending eht to the contract
        Receiver receiver = new Receiver();
        nft.mintTo{value: nft.MINT_PRICE()}(address(receiver));
        // Check that the balance of the contract is correct
        assertEq(address(nft).balance, nft.MINT_PRICE());
        // Confirm that a non-owner cannot withdraw
        vm.expectRevert(&quot;Ownable: caller is not the owner&quot;);
        vm.startPrank(address(0xd3ad));
        nft.withdrawPayments(payable(address(0xd3ad)));
        vm.stopPrank();
    }
}

contract Receiver is ERC721TokenReceiver {
    function onERC721Received(
        address operator,
        address from,
        uint256 id,
        bytes calldata data
    ) external returns (bytes4){
        return this.onERC721Received.selector;
    }
}

</code></pre>
<p>The test suite is set up as a contract with a <code>setUp</code> method which runs before every individual test.</p>
<p>As you can see, Forge offers a number of <a href="tutorials/../forge/cheatcodes">cheatcodes</a> to manipulate state to accommodate your testing scenario.</p>
<p>For example, our <code>testFailMaxSupplyReached</code> test checks that an attempt to mint fails when the max supply of NFT is reached. Thus, the <code>currentTokenId</code> of the NFT contract needs to be set to the max supply by using the store cheatcode which allows you to write data to your contracts storage slots. The storage slots you wish to write to can easily be found using the
<a href="https://github.com/brockelmore/forge-std/"><code>forge-std</code></a> helper library. You can run the test with the following command:</p>
<pre><code class="language-bash">forge test
</code></pre>
<p>If you want to put your Forge skills to practice, write tests for the remaining methods of our NFT contract. Feel free to PR them to <a href="https://github.com/FredCoen/nft-tutorial">nft-tutorial</a>, where you will find the full implementation of this tutorial.</p>
<h3 id="gas-reports-for-your-function-calls"><a class="header" href="#gas-reports-for-your-function-calls">Gas reports for your function calls</a></h3>
<p>Foundry provides comprehensive gas reports about your contracts. For every function called within your tests, it returns the minimum, average, median and max gas cost. To print the gas report simply run:</p>
<pre><code class="language-bash">forge test --gas-report
</code></pre>
<p>This comes in handy when looking at various gas optimizations within your contracts.</p>
<p>Let's have a look at the gas savings we made by substituting OpenZeppelin with Solmate for our ERC721 implementation. You can find the NFT implementation using both libraries <a href="https://github.com/FredCoen/nft-tutorial">here</a>. Below are the resulting gas reports when running <code>forge test --gas-report</code> on that repository.</p>
<p>As you can see, our implementation using Solmate saves around 500 gas on a successful mint (the max gas cost of the <code>mintTo</code> function calls).</p>
<p><img src="tutorials/../images/nft-tutorial/gas-report-solmate-nft.png" alt="Gas report solmate NFT" /></p>
<p><img src="tutorials/../images/nft-tutorial/gas-report-oz-nft.png" alt="Gas report OZ NFT" /></p>
<p>That's it, I hope this will give you a good practical basis of how to get started with foundry. We think there is no better way to deeply understand solidity than writing your tests in solidity. You will also experience less context switching between javascript and solidity. Happy coding!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dockerizing-a-foundry-project"><a class="header" href="#dockerizing-a-foundry-project">Dockerizing a Foundry project</a></h2>
<p>This tutorial shows you how to build, test, and deploy a smart contract using Foundry's Docker image. It adapts code from the <a href="tutorials/./solmate-nft.html">solmate nft</a> tutorial. If you haven't completed that tutorial yet, and are new to solidity, you may want to start with it first. Alternatively, if you have some familiarity with Docker and Solidity, you can use your own existing project and adjust accordingly. The full source code for both the NFT and the Docker stuff is available <a href="https://github.com/dmfxyz/foundry-docker-tutorial">here</a>.</p>
<blockquote>
<p>This tutorial is for illustrative purposes only and provided on an as-is basis. The tutorial is not audited nor fully tested. No code in this tutorial should be used in a production environment.</p>
</blockquote>
<h3 id="installation-and-setup"><a class="header" href="#installation-and-setup">Installation and Setup</a></h3>
<p>The only installation required to run this tutorial is Docker, and optionally, an IDE of your choice. 
Follow the <a href="tutorials//getting-started/installation.html#using-with-docker">Docker installation instructions</a>.</p>
<p>To keep future commands succinct, let's re-tag the image:<br />
<code>docker tag ghcr.io/gakonst/foundry:latest foundry:latest</code></p>
<p>Having Foundry installed locally is not strictly required, but it may be helpful for debugging. You can install it using <a href="tutorials//getting-started/installation.html#using-foundryup">foundryup</a>.</p>
<p>Finally, to use any of the <code>cast</code> or <code>forge create</code> portions of this tutorial, you will need access to an Ethereum node. If you don't have your own node running (likely), you can use a 3rd party node service. We won't recommend a specific provider in this tutorial. A good place to start learning about Nodes-as-a-Service is <a href="https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/">Ethereum's article</a> on the subject.</p>
<p><strong>For the rest of this tutorial, it is assumed that the RPC endpoint of your ethereum node is set like this</strong>: <code>export RPC_URL=&lt;YOUR_RPC_URL&gt;</code></p>
<h3 id="a-tour-around-the-foundry-docker-image"><a class="header" href="#a-tour-around-the-foundry-docker-image">A tour around the Foundry docker image</a></h3>
<p>The docker image can be used in two primary ways:</p>
<ol>
<li>As an interface directly to forge and cast</li>
<li>As a base image for building your own containerized test, build, and deployment tooling</li>
</ol>
<p>We will cover both, but let's start by taking a look at interfacing with foundry using docker. This is also a good test that your local installation worked!</p>
<p>We can run any of the <code>cast</code> <a href="tutorials//reference/cast.html">commands</a> against our docker image. Let's fetch the latest block information:</p>
<pre><code class="language-sh">$ docker run foundry &quot;cast block --rpc-url $RPC_URL latest&quot;
baseFeePerGas        &quot;0xb634241e3&quot;
difficulty           &quot;0x2e482bdf51572b&quot;
extraData            &quot;0x486976656f6e20686b&quot;
gasLimit             &quot;0x1c9c380&quot;
gasUsed              &quot;0x652993&quot;
hash                 &quot;0x181748772da2f968bcc91940c8523bb6218a7d57669ded06648c9a9fb6839db5&quot;
logsBloom            &quot;0x406010046100001198c220108002b606400029444814008210820c04012804131847150080312500300051044208430002008029880029011520380060262400001c538d00440a885a02219d49624aa110000003094500022c003600a00258009610c410323580032000849a0408a81a0a060100022505202280c61880c80020e080244400440404520d210429a0000400010089410c8408162903609c920014028a94019088681018c909980701019201808040004100000080540610a9144d050020220c10a24c01c000002005400400022420140e18100400e10254926144c43a200cc008142080854088100128844003010020c344402386a8c011819408&quot;
miner                &quot;0x1ad91ee08f21be3de0ba2ba6918e714da6b45836&quot;
mixHash              &quot;0xb920857687476c1bcb21557c5f6196762a46038924c5f82dc66300347a1cfc01&quot;
nonce                &quot;0x1ce6929033fbba90&quot;
number               &quot;0xdd3309&quot;
parentHash           &quot;0x39c6e1aa997d18a655c6317131589fd327ae814ef84e784f5eb1ab54b9941212&quot;
receiptsRoot         &quot;0x4724f3b270dcc970f141e493d8dc46aeba6fffe57688210051580ac960fe0037&quot;
sealFields           []
sha3Uncles           &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;
size                 &quot;0x1d6bb&quot;
stateRoot            &quot;0x0d4b714990132cf0f21801e2931b78454b26aad706fc6dc16b64e04f0c14737a&quot;
timestamp            &quot;0x6246259b&quot;
totalDifficulty      &quot;0x9923da68627095fd2e7&quot;
transactions         [...]
uncles               []
</code></pre>
<p>If we're in a directory with some Solidity <a href="https://github.com/dmfxyz/foundry-docker-tutorial">source code</a>, we can mount that directory into docker and use <code>forge</code> however we wish. For example:</p>
<pre><code class="language-sh">$ docker run -v $PWD:/app foundry &quot;forge test --root /app --watch&quot;
No files changed, compilation skipped

Running 8 tests for src/test/OpenZeppelinNft.t.sol:OpenZeppelinNftTests
[PASS] testBalanceIncremented() (gas: 219326)
[PASS] testFailMaxSupplyReached() (gas: 136426)
[PASS] testFailMintToZeroAddress() (gas: 34620)
[PASS] testFailNoMintPricePaid() (gas: 5503)
[PASS] testFailUnSafeContractReceiver() (gas: 90282)
[PASS] testMintPricePaid() (gas: 81512)
[PASS] testNewMintOwnerRegistered() (gas: 192487)
[PASS] testSafeContractReceiver() (gas: 268021)
Test result: ok. 8 passed; 0 failed; finished in 1.97ms

Running 8 tests for src/test/SolmateNft.sol:SolmateNftTests
[PASS] testBalanceIncremented() (gas: 218897)
[PASS] testFailMaxSupplyReached() (gas: 136426)
[PASS] testFailMintToZeroAddress() (gas: 34564)
[PASS] testFailNoMintPricePaid() (gas: 5503)
[PASS] testFailUnSafeContractReceiver() (gas: 89813)
[PASS] testMintPricePaid() (gas: 81279)
[PASS] testNewMintOwnerRegistered() (gas: 192272)
[PASS] testSafeContractReceiver() (gas: 267525)
Test result: ok. 8 passed; 0 failed; finished in 1.98ms
</code></pre>
<p>You can see our code was compiled and tested entirely within the container. Also, since we passed the <code>--watch</code> option, the container will recompile the code whenever a change is detected.</p>
<h3 id="creating-a-build-and-test-image"><a class="header" href="#creating-a-build-and-test-image">Creating a &quot;build and test&quot; image</a></h3>
<p>Let's use the Foundry docker image as a base for using our own Docker image. We'll use the image to:</p>
<ol>
<li>Build our solidity code</li>
<li>Run our solidity tests</li>
</ol>
<p>A simple <code>Dockerfile</code> can accomplish these two goals:</p>
<pre><code class="language-docker"># Use the latest foundry image
FROM ghcr.io/gakonst/foundry

# Copy our source code into the container
WORKDIR /app

# Build and test the source code
COPY . .
RUN forge build
RUN forge test
</code></pre>
<p>You can build this docker image and watch forge build/run the tests within the container:</p>
<pre><code class="language-sh">$ docker build --no-cache --progress=plain .
</code></pre>
<p>Now, what happens if one of our tests fail? Modify <code>src/test/NFT.t.sol</code> as you please to make one of the tests fail. Try to build image again.</p>
<pre><code class="language-sh">$ docker build --no-cache --progress=plain .
&lt;...&gt;
#9 0.522 Failed tests:
#9 0.522 [FAIL. Reason: Ownable: caller is not the owner] testWithdrawalFailsAsNotOwner() (gas: 193917)
#9 0.522
#9 0.522 Encountered a total of 1 failing tests, 9 tests succeeded
------
error: failed to solve: executor failed running [/bin/sh -c forge test]: exit code: 1
</code></pre>
<p>Our image failed to build because our tests failed! This is actually a nice property, because it means if we have a Docker image that successfully built (and therefore is available for use), we know the code inside the image passed the tests.*</p>
<blockquote>
<p>*Of course, chain of custody of your docker images is very important. Docker layer hashes can be very useful for verification. In a production environment, consider <a href="https://docs.docker.com/engine/security/trust/#:%7E:text=To%20sign%20a%20Docker%20Image,the%20local%20Docker%20trust%20repository">signing your docker images</a>.</p>
</blockquote>
<h3 id="creating-a-deployer-iamge"><a class="header" href="#creating-a-deployer-iamge">Creating a deployer iamge</a></h3>
<p>Now, we'll move on to a bit more of an advanced Dockerfile. Let's add an entrypoint that allows us to deploy our code by using the built (and tested!) image. We can target the Rinkeby testnet first.</p>
<pre><code class="language-docker"># Use the latest foundry image
FROM ghcr.io/gakonst/foundry

# Copy our source code into the container
WORKDIR /app

# Build and test the source code
COPY . .
RUN forge build
RUN forge test

# Set the entrypoint to the forge deployment command
ENTRYPOINT [&quot;forge&quot;, &quot;create&quot;]
</code></pre>
<p>Let's build the image, this time giving it a name:</p>
<pre><code class="language-sh">$ docker build --no-cache --progress=plain -t nft-deployer .
</code></pre>
<p>Here's how we can use our docker image to deploy:</p>
<pre><code class="language-sh">$ docker run nft-deployer --rpc-url $RPC_URL --constructor-args &quot;ForgeNFT&quot; &quot;FNFT&quot; &quot;https://ethereum.org&quot; --private-key $PRIVATE_KEY ./src/NFT.sol:NFT
No files changed, compilation skipped
Deployer: 0x496e09fcb240c33b8fda3b4b74d81697c03b6b3d
Deployed to: 0x23d465eaa80ad2e5cdb1a2345e4b54edd12560d3
Transaction hash: 0xf88c68c4a03a86b0e7ecb05cae8dea36f2896cd342a6af978cab11101c6224a9
</code></pre>
<p>We've just built, tested, and deployed our contract entirely within a docker container! This tutorial was intended to for testnet, but you can run the exact same Docker image targeting mainnet and be confident that the same code is being deployed by the same tooling.</p>
<h3 id="why-is-this-useful"><a class="header" href="#why-is-this-useful">Why is this useful?</a></h3>
<p>Docker is about portability, re-producibility, and environment invariance. This means you can be less concerned about unexpected changes when you switch between environments, networks, developers, etc. Here are a few basic examples of why <strong>I</strong> like to use Docker images for smart contract deployment:</p>
<ul>
<li>Reduces overhead of ensuring system level dependencies match between deployment environments (e.g. does your production runner always have the same version of <code>forge</code> as your dev runner?)</li>
<li>Increases confidence that code has been tested prior to deployment and has not been altered (e.g. if, in the above image, your code re-compiles on deployment, that's a major red flag).</li>
<li>Eases pain points around segregation of duties: people with your mainnet credentials do not need to ensure they have the latest compiler, codebase, etc. It's easy to ensure that the docker deploy image someone ran in testnet is identical to the one targeting mainnet.</li>
<li>At the risk of sounding web2, Docker is an accepted standard on virtually all public cloud providers. It makes it easy to schedule jobs, tasks, etc that need to interact with the blockchain.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cast-reference"><a class="header" href="#cast-reference"><code>cast</code> Reference</a></h2>
<p><code>cast</code> lets you perform Ethereum RPC calls from the comfort of your command line.</p>
<h3 id="cast-cli"><a class="header" href="#cast-cli">Cast CLI</a></h3>
<p>This is a complete overview of all the available <code>cast</code> subcommands. For detailed descriptions and example usage, see below.</p>
<pre><code class="language-text">--abi-decode             Decode ABI-encoded hex output data. Pass --input to decode as input, or use
                            `--calldata-decode`
--calldata-decode        Decode ABI-encoded hex input data. Use `--abi-decode` to decode output data
--from-utf8              convert text data into hexdata
--from-wei               convert wei into an ETH amount
--max-int                maximum i256 value
--max-uint               maximum u256 value
--min-int                minimum i256 value
--to-ascii               convert hex data to text data
--to-bytes32             left-pads a hex bytes string to 32 bytes)
--to-checksum-address    convert an address to a checksummed format (EIP-55)
--to-dec                 convert hex value into decimal number
--to-fix                 convert integers into fixed point with specified decimals
--to-hex                 convert a decimal number into hex
--to-hexdata             [&lt;hex&gt;|&lt;/path&gt;|&lt;@tag&gt;]
                                Output lowercase, 0x-prefixed hex, converting from the
                                input, which can be:
                                - mixed case hex with or without 0x prefix
                                - 0x prefixed hex, concatenated with a ':'
                                - absolute path to file
                                - @tag, where $TAG is defined in environment variables
--to-uint256             convert a number into uint256 hex string with 0x prefix
--to-wei                 convert an ETH amount into wei
4byte                    Fetches function signatures given the selector from 4byte.directory
4byte-decode             Decodes transaction calldata by fetching the signature using 4byte.directory
abi-encode
age                      Prints the timestamp of a block
balance                  Print the balance of &lt;account&gt; in wei
basefee                  Print the basefee of a block
block                    Prints information about &lt;block&gt;. If &lt;field&gt; is given, print only the value of that
                            field
block-number             Prints latest block number
call                     Perform a local call to &lt;to&gt; without publishing a transaction.
calldata                 Pack a signature and an argument list into hexadecimal calldata.
chain                    Prints symbolic name of current blockchain by checking genesis hash
chain-id                 Returns ethereum chain id
code                     Prints the bytecode at &lt;address&gt;
completions              Generate shell completions script
estimate                 Estimate the gas cost of a transaction from &lt;from&gt; to &lt;to&gt; with &lt;data&gt;
find-block               Prints the block number closest to the provided timestamp
gas-price                Prints current gas price of target chain
help                     Print this message or the help of the given subcommand(s)
keccak                   Keccak-256 hashes arbitrary data
lookup-address           Returns the name the provided address resolves to
namehash                 Returns ENS namehash of provided name
nonce                    Prints the number of transactions sent from &lt;address&gt;
proof                    Generate a storage proof for a given slot
resolve-name             Returns the address the provided ENS name resolves to
send                     Publish a transaction signed by &lt;from&gt; to call &lt;to&gt; with &lt;data&gt;
storage                  Show the raw value of a contract's storage slot
tx                       Show information about the transaction &lt;tx-hash&gt;
wallet                   Set of wallet management utilities
</code></pre>
<h3 id="cast-subcommands"><a class="header" href="#cast-subcommands"><code>cast</code> Subcommands</a></h3>
<p>This section documents all <code>cast</code> subcommands and provides usage examples.</p>
<h4 id="--abi-decode"><a class="header" href="#--abi-decode"><code>--abi-decode</code></a></h4>
<pre><code class="language-ignore">cast --abi-decode [OPTIONS] &lt;SIG&gt; &lt;CALLDATA&gt;
</code></pre>
<p>Where <code>[OPTIONS]</code> is <code>--input</code></p>
<p>Decode ABI-encoded hexadecimal output. Pass <code>--input</code> to decode as input, or use <code>--calldata-decode</code>.</p>
<h5 id="example"><a class="header" href="#example">Example</a></h5>
<pre><code class="language-bash">$ cast --abi-decode --input &quot;fulfillRandomness(bytes32,uint256)&quot; 0x1F1F897F676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
0x676d000000000000000000000000000000000000000000000000000000000000
999
</code></pre>
<br>
<hr />
<h4 id="--calldata-decode"><a class="header" href="#--calldata-decode"><code>--calldata-decode</code></a></h4>
<pre><code class="language-ignore">cast --calldata-decode &lt;SIG&gt; &lt;CALLDATA&gt;
</code></pre>
<p>Decode ABI-encoded hexadecimal input. Use <code>--abi-decode</code> to decode output data.</p>
<h5 id="example-1"><a class="header" href="#example-1">Example</a></h5>
<pre><code class="language-bash">$ cast --calldata-decode &quot;fulfillRandomness(bytes32,uint256)&quot; 0x1F1F897F676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
0x676d000000000000000000000000000000000000000000000000000000000000
999
</code></pre>
<br>
<hr />
<h4 id="--from-utf8"><a class="header" href="#--from-utf8"><code>--from-utf8</code></a></h4>
<pre><code class="language-ignore">cast --from-utf8 [TEXT]
</code></pre>
<p>Convert from UTF8 to hexadecimal.</p>
<h5 id="example-2"><a class="header" href="#example-2">Example</a></h5>
<pre><code class="language-bash">$ cast --from-utf8 &quot;gm&quot;
0x676d
</code></pre>
<br>
<hr />
<h4 id="--from-wei"><a class="header" href="#--from-wei"><code>--from-wei</code></a></h4>
<pre><code class="language-ignore">cast --from-wei [ARGS]
</code></pre>
<p>Where <code>[ARGS]</code> are <code>&lt;VALUE&gt;</code> and <code>&lt;UNIT&gt;</code></p>
<p>Convert from <code>wei</code> to <code>ether</code>.</p>
<h5 id="example-3"><a class="header" href="#example-3">Example</a></h5>
<pre><code class="language-bash">$ cast --from-wei 100000000000000000
0.1
</code></pre>
<br>
<hr />
<h4 id="--max-int"><a class="header" href="#--max-int"><code>--max-int</code></a></h4>
<pre><code class="language-ignore">cast --max-int
</code></pre>
<p>Maximum <code>int256</code> value.</p>
<h5 id="example-4"><a class="header" href="#example-4">Example</a></h5>
<pre><code class="language-bash">$ cast --max-int
57896044618658097711785492504343953926634992332820282019728792003956564819967
</code></pre>
<br>
<hr />
<h4 id="--max-uint"><a class="header" href="#--max-uint"><code>--max-uint</code></a></h4>
<pre><code class="language-ignore">cast --max-uint
</code></pre>
<p>Maximum <code>uint256</code> value.</p>
<h5 id="example-5"><a class="header" href="#example-5">Example</a></h5>
<pre><code class="language-bash">$ cast --max-uint
115792089237316195423570985008687907853269984665640564039457584007913129639935
</code></pre>
<br>
<hr />
<h4 id="--min-int"><a class="header" href="#--min-int"><code>--min-int</code></a></h4>
<pre><code class="language-ignore">cast --min-int
</code></pre>
<p>Minimum <code>int256</code> value.</p>
<h5 id="example-6"><a class="header" href="#example-6">Example</a></h5>
<pre><code class="language-bash">$ cast --min-int
-57896044618658097711785492504343953926634992332820282019728792003956564819968
</code></pre>
<br>
<hr />
<h4 id="--to-ascii"><a class="header" href="#--to-ascii"><code>--to-ascii</code></a></h4>
<pre><code class="language-ignore">cast --to-ascii [HEXDATA]
</code></pre>
<p>Convert from hexadecimal to ASCII.</p>
<h5 id="example-7"><a class="header" href="#example-7">Example</a></h5>
<pre><code class="language-bash">$ cast --to-ascii 0x676d
gm
</code></pre>
<br>
<hr />
<h4 id="--to-bytes32"><a class="header" href="#--to-bytes32"><code>--to-bytes32</code></a></h4>
<pre><code class="language-ignore">cast --to-bytes32 [BYTES]
</code></pre>
<p>Left pad hexadecimal to <code>bytes32</code>.</p>
<h5 id="example-8"><a class="header" href="#example-8">Example</a></h5>
<pre><code class="language-bash">$ cast --to-bytes32 0x676d
0x676d000000000000000000000000000000000000000000000000000000000000
</code></pre>
<br>
<hr />
<h4 id="--to-checksum-address"><a class="header" href="#--to-checksum-address"><code>--to-checksum-address</code></a></h4>
<pre><code class="language-ignore">cast --to-checksum-address [ADDRESS]
</code></pre>
<p>Convert an address to a checksummed format (EIP-55)</p>
<h5 id="example-9"><a class="header" href="#example-9">Example</a></h5>
<pre><code class="language-bash">$ cast --to-checksum-address 0x6b175474e89094c44da98b954eedeac495271d0f
0x6B175474E89094C44Da98b954EedeAC495271d0F
</code></pre>
<br>
<hr />
<h4 id="--to-dec"><a class="header" href="#--to-dec"><code>--to-dec</code></a></h4>
<pre><code class="language-ignore">cast --to-dec [HEXVALUE]
</code></pre>
<p>Convert from hexadecimal to decimal.</p>
<h5 id="example-10"><a class="header" href="#example-10">Example</a></h5>
<pre><code class="language-bash">$ cast --to-dec 0xf
15
</code></pre>
<br>
<hr />
<h4 id="--to-fix"><a class="header" href="#--to-fix"><code>--to-fix</code></a></h4>
<pre><code class="language-ignore">cast --to-fix [ARGS]
</code></pre>
<p>Where <code>[ARGS]</code> are <code>&lt;DECIMALS&gt;</code> and <code>&lt;VALUE&gt;</code></p>
<p>Convert from integer to fixed-point.</p>
<h5 id="example-11"><a class="header" href="#example-11">Example</a></h5>
<pre><code class="language-bash">cast --to-fix 18 1
0.000000000000000001
</code></pre>
<br>
<hr />
<h4 id="--to-hex"><a class="header" href="#--to-hex"><code>--to-hex</code></a></h4>
<pre><code class="language-ignore">cast --to-hex [DECIMAL]
</code></pre>
<p>Convert from decimal to hexadecimal.</p>
<h5 id="example-12"><a class="header" href="#example-12">Example</a></h5>
<pre><code class="language-bash">$ cast --to-hex 15
0xf
</code></pre>
<br>
<hr />
<h4 id="--to-hexdata"><a class="header" href="#--to-hexdata"><code>--to-hexdata</code></a></h4>
<pre><code class="language-ignore">cast --to-hexdata [INPUT]
</code></pre>
<p>Where <code>[INPUT]</code> can be:</p>
<ul>
<li>mixed case hex with or without <code>0x</code> prefix</li>
<li><code>0x</code> prefixed hex, concatenated with a <code>:</code></li>
<li>absolute path to file</li>
<li><code>@&lt;$TAG&gt;</code>, where <code>$TAG</code> is defined in environment variables</li>
</ul>
<p>Convert input to lowercase, <code>0x</code>-prefixed hexadecimal.</p>
<h5 id="example-13"><a class="header" href="#example-13">Example</a></h5>
<pre><code class="language-bash">$ export EXAMPLE_INPUT=gm
$ cast --to-hexdata @EXAMPLE_INPUT
0x676d
</code></pre>
<br>
<hr />
<h4 id="--to-uint256"><a class="header" href="#--to-uint256"><code>--to-uint256</code></a></h4>
<pre><code class="language-ignore">cast --to-uint256 [VALUE]
</code></pre>
<p>Convert a number into <code>uint256</code> hexadecimal.</p>
<h5 id="example-14"><a class="header" href="#example-14">Example</a></h5>
<pre><code class="language-bash">$ cast --to-uint256 15
0x000000000000000000000000000000000000000000000000000000000000000f
</code></pre>
<br>
<hr />
<h4 id="--to-wei"><a class="header" href="#--to-wei"><code>--to-wei</code></a></h4>
<pre><code class="language-ignore">cast --to-wei [ARGS]
</code></pre>
<p>Where <code>[ARGS]</code> are <code>&lt;VALUE&gt;</code> and <code>&lt;UNIT&gt;</code></p>
<p>Convert from <code>ether</code> to <code>wei</code>.</p>
<h5 id="example-15"><a class="header" href="#example-15">Example</a></h5>
<pre><code class="language-bash">$ cast --to-wei 1
1000000000000000000
</code></pre>
<br>
<hr />
<h4 id="4byte"><a class="header" href="#4byte"><code>4byte</code></a></h4>
<pre><code class="language-ignore">cast 4byte &lt;SELECTOR&gt;
</code></pre>
<p>Fetch function signature using the selector.</p>
<h5 id="example-16"><a class="header" href="#example-16">Example</a></h5>
<pre><code class="language-bash">$ cast 4byte 0x1F1F897F
fulfillRandomness(bytes32,uint256)
</code></pre>
<br>
<hr />
<h4 id="4byte-decode"><a class="header" href="#4byte-decode"><code>4byte-decode</code></a></h4>
<pre><code class="language-ignore">cast 4byte-decode [OPTIONS] &lt;CALLDATA&gt;
</code></pre>
<p>Where <code>[OPTIONS]</code> is <code>--id &lt;ID&gt;</code> (the 4byte selector id to use, can also be <code>earliest</code> or <code>latest</code>)</p>
<p>Decode calldata by fetching the signature.</p>
<h5 id="example-17"><a class="header" href="#example-17">Example</a></h5>
<pre><code class="language-bash">$ cast 4byte-decode 0x1F1F897F676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
1) &quot;fulfillRandomness(bytes32,uint256)&quot;
0x676d000000000000000000000000000000000000000000000000000000000000
999
</code></pre>
<br>
<hr />
<h4 id="abi-encode"><a class="header" href="#abi-encode"><code>abi-encode</code></a></h4>
<pre><code class="language-ignore">cast abi-encode &lt;SIG&gt; &lt;ARGS&gt;
</code></pre>
<p>Endcode the arguments with the function signature using ABI, exculding the selector.</p>
<h5 id="example-18"><a class="header" href="#example-18">Example</a></h5>
<pre><code class="language-bash">$ cast abi-encode &quot;fulfillRandomness(bytes32,uint256)&quot; 0x676d000000000000000000000000000000000000000000000000000000000000 999
0x676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
</code></pre>
<br>
<hr />
<h4 id="age"><a class="header" href="#age"><code>age</code></a></h4>
<pre><code class="language-ignore">cast age --rpc-url &lt;RPC_URL&gt; [BLOCK]
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Print the timestamp of a block.</p>
<h5 id="example-19"><a class="header" href="#example-19">Example</a></h5>
<pre><code class="language-bash">$ cast age --rpc-url &lt;your_rpc_url&gt; 1
Thu Jul 30 15:26:28 2015
</code></pre>
<br>
<hr />
<h4 id="balance"><a class="header" href="#balance"><code>balance</code></a></h4>
<pre><code class="language-ignore">cast balance [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;WHO&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--block &lt;BLOCK&gt;</code> (the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code>)</p>
<p>Print the balance of an account in wei.</p>
<h5 id="example-20"><a class="header" href="#example-20">Example</a></h5>
<pre><code class="language-bash">$ cast balance --rpc-url &lt;your_rpc_url&gt; 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045
4345868603562666975407
</code></pre>
<br>
<hr />
<h4 id="basefee"><a class="header" href="#basefee"><code>basefee</code></a></h4>
<pre><code class="language-ignore">cast basefee --rpc-url &lt;RPC_URL&gt; [BLOCK]
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[BLOCK]</code> is the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code></p>
<p>Print the basefee of a block.</p>
<h5 id="example-21"><a class="header" href="#example-21">Example</a></h5>
<pre><code class="language-bash">$ cast basefee --rpc-url &lt;your_rpc_url&gt;
75171909348
</code></pre>
<br>
<hr />
<h4 id="block"><a class="header" href="#block"><code>block</code></a></h4>
<pre><code class="language-ignore">cast block [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;BLOCK&gt; [FIELD]
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where:</p>
<ul>
<li><code>[OPTIONS]</code> are <code>--full</code> and <code>--json</code></li>
<li><code>&lt;BLOCK&gt;</code> is the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code></li>
</ul>
<p>Print information about a block or only one of its fields.</p>
<h5 id="example-22"><a class="header" href="#example-22">Example</a></h5>
<pre><code class="language-bash">$ cast block --rpc-url &lt;your_rpc_url&gt; latest
baseFeePerGas        &quot;0x1823d83b1f&quot;
difficulty           &quot;0x2d3af62284c2ab&quot;
extraData            &quot;0x466c6578706f6f6c2f53312f55532d57657374202d204d656c626f75726e65&quot;
gasLimit             &quot;0x...
...
</code></pre>
<br>
<hr />
<h4 id="block-number"><a class="header" href="#block-number"><code>block-number</code></a></h4>
<pre><code class="language-ignore">cast block-number --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Print latest block number.</p>
<h5 id="example-23"><a class="header" href="#example-23">Example</a></h5>
<pre><code class="language-bash">$ cast block-number --rpc-url &lt;your_rpc_url&gt;
14100150
</code></pre>
<br>
<hr />
<h4 id="call"><a class="header" href="#call"><code>call</code></a></h4>
<pre><code class="language-ignore">cast call [OPTIONS] &lt;ADDRESS&gt; &lt;SIG&gt; [ARGS] --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> are:</p>
<ul>
<li><code>--chain &lt;CHAIN&gt;</code> (default: mainnet) env: <code>CHAIN</code></li>
<li><code>--etherscan-api-key &lt;ETHERSCAN_API_KEY&gt;</code> env: <code>ETHERSCAN_API_KEY</code></li>
<li><code>--from &lt;FROM&gt;</code> (the sender account) env: <code>ETH_FROM</code></li>
<li><code>--flashbots</code> (to use a flashbots RPC URL: https://rpc.flashbots.net)</li>
<li><code>--hd-path &lt;HD_PATH&gt;</code> (derivation path for your hardware wallet, trezor or ledger)</li>
<li><code>--interactive</code> (interactive prompt to insert your private key)</li>
<li><code>--keystore &lt;KEYSTORE_PATH&gt;</code> (path to your keystore folder / file) env: <code>ETH_KEYSTORE</code></li>
<li><code>--ledger</code> (use your Ledger hardware wallet)</li>
<li><code>--mnemonic-path &lt;MNEMONIC_PATH&gt;</code> (path to your mnemonic file)</li>
<li><code>--mnemonic_index &lt;MNEMONIC_INDEX&gt;</code> (your index in the standard hd path, default: 0)</li>
<li><code>--password &lt;KEYSTORE_PASSWORD&gt;</code> (your keystore password)</li>
<li><code>--private-key &lt;PRIVATE_KEY&gt;</code> (your private key string)</li>
<li><code>--trezor</code> (use your Trezor hardware wallet)</li>
</ul>
<p>Perform a local smart contract call.</p>
<h5 id="example-24"><a class="header" href="#example-24">Example</a></h5>
<pre><code class="language-bash">$ cast call 0x6b175474e89094c44da98b954eedeac495271d0f &quot;totalSupply()(uint256)&quot; --rpc-url &lt;your_rpc_url&gt;
9086622410684231497979028744
</code></pre>
<br>
<hr />
<h4 id="calldata"><a class="header" href="#calldata"><code>calldata</code></a></h4>
<pre><code class="language-ignore">cast calldata &lt;SIG&gt; [ARGS]
</code></pre>
<p>Pack a function signature and arguments into hexadecimal calldata.</p>
<h5 id="example-25"><a class="header" href="#example-25">Example</a></h5>
<pre><code class="language-bash">$ cast calldata &quot;fulfillRandomness(bytes32,uint256)&quot; 0x676d000000000000000000000000000000000000000000000000000000000000 999
0x1f1f897f676d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e7
</code></pre>
<br>
<hr />
<h4 id="chain"><a class="header" href="#chain"><code>chain</code></a></h4>
<pre><code class="language-ignore">cast chain --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Print symbolic name of current blockchain by checking genesis hash.</p>
<h5 id="example-26"><a class="header" href="#example-26">Example</a></h5>
<pre><code class="language-bash">$ cast chain --rpc-url &lt;your_rpc_url&gt;
ethlive
</code></pre>
<br>
<hr />
<h4 id="chain-id"><a class="header" href="#chain-id"><code>chain-id</code></a></h4>
<pre><code class="language-ignore">cast chain-id --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Return chain ID.</p>
<h5 id="example-27"><a class="header" href="#example-27">Example</a></h5>
<pre><code class="language-bash">$ cast chain-id --rpc-url &lt;your_rpc_url&gt;
1
</code></pre>
<br>
<hr />
<h4 id="code"><a class="header" href="#code"><code>code</code></a></h4>
<pre><code class="language-ignore">cast code [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;WHO&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--block &lt;BLOCK&gt;</code> (the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code>)</p>
<p>Print the bytecode at an address.</p>
<h5 id="example-28"><a class="header" href="#example-28">Example</a></h5>
<pre><code class="language-bash">$ cast code --rpc-url &lt;your_rpc_url&gt; 0x1f9840a85d5af5bf1d1762f925bdaddc4201f984
0x60806040523480156100...
</code></pre>
<br>
<hr />
<h4 id="completions"><a class="header" href="#completions"><code>completions</code></a></h4>
<pre><code class="language-ignore">cast completions &lt;SHELL&gt;
</code></pre>
<p>Where <code>&lt;SHELL&gt;</code> can be <code>bash</code>, <code>elvish</code>, <code>fish</code>, <code>powershell</code>, <code>zsh</code></p>
<p>Generate shell completions script.</p>
<h5 id="example-29"><a class="header" href="#example-29">Example</a></h5>
<pre><code class="language-bash">$ cast completions bash
prints the bash completions script here...
</code></pre>
<br>
<hr />
<h4 id="estimate"><a class="header" href="#estimate"><code>estimate</code></a></h4>
<pre><code class="language-ignore">cast estimate [OPTIONS] &lt;ADDRESS&gt; &lt;SIG&gt; [ARGS] --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> are:</p>
<ul>
<li><code>--chain &lt;CHAIN&gt;</code> (default: mainnet) env: <code>CHAIN</code></li>
<li><code>--etherscan-api-key &lt;ETHERSCAN_API_KEY&gt;</code> env: <code>ETHERSCAN_API_KEY</code></li>
<li><code>--from &lt;FROM&gt;</code> (the sender account) env: <code>ETH_FROM</code></li>
<li><code>--flashbots</code> (to use a flashbots RPC URL: https://rpc.flashbots.net)</li>
<li><code>--hd-path &lt;HD_PATH&gt;</code> (derivation path for your hardware wallet, trezor or ledger)</li>
<li><code>--interactive</code> (interactive prompt to insert your private key)</li>
<li><code>--keystore &lt;KEYSTORE_PATH&gt;</code> (path to your keystore folder / file) env: <code>ETH_KEYSTORE</code></li>
<li><code>--ledger</code> (use your Ledger hardware wallet)</li>
<li><code>--mnemonic-path &lt;MNEMONIC_PATH&gt;</code> (path to your mnemonic file)</li>
<li><code>--mnemonic_index &lt;MNEMONIC_INDEX&gt;</code> (your index in the standard hd path, default: 0)</li>
<li><code>--password &lt;KEYSTORE_PASSWORD&gt;</code> (your keystore password)</li>
<li><code>--private-key &lt;PRIVATE_KEY&gt;</code> (your private key string)</li>
<li><code>--trezor</code> (use your Trezor hardware wallet)</li>
</ul>
<p>Estimate the gas cost of a transaction.</p>
<h5 id="example-30"><a class="header" href="#example-30">Example</a></h5>
<pre><code class="language-bash">$ cast estimate --from 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045 0xc18360217d8f7ab5e7c516566761ea12ce7f9d72 &quot;transfer(address,uint)(bool)&quot; 0x15322B546e31F5Bfe144C4ae133A9Db6F0059fe3 1000000000000000000 --rpc-url &lt;your_rpc_url&gt;
90677
</code></pre>
<br>
<hr />
<h4 id="find-block"><a class="header" href="#find-block"><code>find-block</code></a></h4>
<pre><code class="language-ignore">cast find-block --rpc-url &lt;RPC_URL&gt; &lt;TIMESTAMP&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Prints the block number closest to the provided timestamp</p>
<h5 id="example-31"><a class="header" href="#example-31">Example</a></h5>
<pre><code class="language-bash">$ cast find-block --rpc-url &lt;RPC_URL&gt; &lt;TIMESTAMP&gt;
13917761
</code></pre>
<br>
<hr />
<h4 id="gas-price"><a class="header" href="#gas-price"><code>gas-price</code></a></h4>
<pre><code class="language-ignore">cast gas-price --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Print current gas price of target chain.</p>
<h5 id="example-32"><a class="header" href="#example-32">Example</a></h5>
<pre><code class="language-bash">$ cast gas-price --rpc-url &lt;your_rpc_url&gt;
89367836498
</code></pre>
<br>
<hr />
<h4 id="keccak"><a class="header" href="#keccak"><code>keccak</code></a></h4>
<pre><code class="language-ignore">cast keccak &lt;DATA&gt;
</code></pre>
<p>Keccak-256-hash arbitrary data.</p>
<h5 id="example-33"><a class="header" href="#example-33">Example</a></h5>
<pre><code class="language-bash">$ cast keccak gm
0x71b78290913af2addd8fcbe5766de306af2c8afbc466ca891e207f73638c7270
</code></pre>
<br>
<hr />
<h4 id="lookup-address"><a class="header" href="#lookup-address"><code>lookup-address</code></a></h4>
<pre><code class="language-ignore">cast lookup-address [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;WHO&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--verify</code> (do a forward resolution to ensure the address is correct)</p>
<p>Get the ENS name an address resolves to.</p>
<h5 id="example-34"><a class="header" href="#example-34">Example</a></h5>
<pre><code class="language-bash">$ cast lookup-address --rpc-url &lt;your_rpc_url&gt; 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045
vitalik.eth
</code></pre>
<br>
<hr />
<h4 id="namehash"><a class="header" href="#namehash"><code>namehash</code></a></h4>
<pre><code class="language-ignore">cast namehash &lt;NAME&gt;
</code></pre>
<p>Print ENS namehash of a ENS name.</p>
<h5 id="example-35"><a class="header" href="#example-35">Example</a></h5>
<pre><code class="language-bash">$ cast namehash &quot;vitalik.eth&quot;
0xee6c4522aab0003e8d14cd40a6af439055fd2577951148c14b6cea9a53475835
</code></pre>
<br>
<hr />
<h4 id="nonce"><a class="header" href="#nonce"><code>nonce</code></a></h4>
<pre><code class="language-ignore">cast nonce [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;WHO&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--block &lt;BLOCK&gt;</code> (the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code>)</p>
<p>Get the number of transactions sent from an address.</p>
<h5 id="example-36"><a class="header" href="#example-36">Example</a></h5>
<pre><code class="language-bash">$ cast nonce --rpc-url &lt;your_rpc_url&gt; 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045
750
</code></pre>
<br>
<hr />
<h4 id="proof"><a class="header" href="#proof"><code>proof</code></a></h4>
<pre><code class="language-ignore">cast proof [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;ADDRESS&gt; [SLOTS]...
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--block &lt;BLOCK&gt;</code> (the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code>)</p>
<p>Generate a storage proof for a given slot</p>
<h5 id="example-37"><a class="header" href="#example-37">Example</a></h5>
<pre><code class="language-bash">$ cast proof --rpc-url &lt;rpc-url&gt; 0xED5AF388653567Af2F388E6224dC7C4b3241C544 1
</code></pre>
<p>This will output a JSON object of the storage proof (inluding the <code>key</code>, <code>proof</code>, and <code>value</code>) as well as other information such as the <code>address</code>, <code>balance</code>, and <code>nonce</code>.</p>
<br>
<hr />
<h4 id="resolve-name"><a class="header" href="#resolve-name"><code>resolve-name</code></a></h4>
<pre><code class="language-ignore">cast resolve-name [OPTIONS] --rpc-url &lt;RPC_URL&gt; [WHO]
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Get the address an ENS name resolves to.</p>
<h5 id="example-38"><a class="header" href="#example-38">Example</a></h5>
<pre><code class="language-bash">$ cast resolve-name --rpc-url &lt;your_rpc_url&gt; &quot;vitalik.eth&quot;
0xd8da6bf26964af9d7eed9e03e53415d37aa96045
</code></pre>
<br>
<hr />
<h4 id="send"><a class="header" href="#send"><code>send</code></a></h4>
<pre><code class="language-ignore">cast send [OPTIONS] &lt;ADDRESS&gt; &lt;SIG&gt; [ARGS] --rpc-url &lt;RPC_URL&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> are:</p>
<ul>
<li><code>--chain &lt;CHAIN&gt;</code> (default: mainnet) env: <code>CHAIN</code></li>
<li><code>--etherscan-api-key &lt;ETHERSCAN_API_KEY&gt;</code> env: <code>ETHERSCAN_API_KEY</code></li>
<li><code>--from &lt;FROM&gt;</code> (the sender account) env: <code>ETH_FROM</code></li>
<li><code>--flashbots</code> (to use a flashbots RPC URL: https://rpc.flashbots.net)</li>
<li><code>--hd-path &lt;HD_PATH&gt;</code> (derivation path for your hardware wallet, trezor or ledger)</li>
<li><code>--interactive</code> (interactive prompt to insert your private key)</li>
<li><code>--keystore &lt;KEYSTORE_PATH&gt;</code> (path to your keystore folder / file) env: <code>ETH_KEYSTORE</code></li>
<li><code>--ledger</code> (use your Ledger hardware wallet)</li>
<li><code>--mnemonic-path &lt;MNEMONIC_PATH&gt;</code> (path to your mnemonic file)</li>
<li><code>--mnemonic_index &lt;MNEMONIC_INDEX&gt;</code> (your index in the standard hd path, default: 0)</li>
<li><code>--password &lt;KEYSTORE_PASSWORD&gt;</code> (your keystore password)</li>
<li><code>--private-key &lt;PRIVATE_KEY&gt;</code> (your private key string)</li>
<li><code>--trezor</code> (use your Trezor hardware wallet)</li>
</ul>
<p>Publish a transaction.</p>
<h5 id="example-39"><a class="header" href="#example-39">Example</a></h5>
<pre><code class="language-bash">$ cast send --chain kovan --from &lt;your_address&gt; --interactive 0xd0A1E359811322d97991E03f863a0C30C2cF029C &quot;deposit()&quot; --value 0.1ether --rpc-url &lt;your_rpc_url&gt;
Insert private key:

prints the transaction receipt...
</code></pre>
<br>
<hr />
<h4 id="storage"><a class="header" href="#storage"><code>storage</code></a></h4>
<pre><code class="language-ignore">cast storage [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;ADDRESS&gt; &lt;SLOT&gt;
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> is <code>--block &lt;BLOCK&gt;</code> (the block you want to query, can also be <code>earliest</code>,<code>latest</code>,<code>pending</code>)</p>
<p>Get the raw value of a contract's storage slot.</p>
<h5 id="example-40"><a class="header" href="#example-40">Example</a></h5>
<pre><code class="language-bash">$ cast storage --rpc-url &lt;your_rpc_url&gt; 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 0
0x577261707065642045746865720000000000000000000000000000000000001a
</code></pre>
<br>
<hr />
<h4 id="tx"><a class="header" href="#tx"><code>tx</code></a></h4>
<pre><code class="language-ignore">cast tx [OPTIONS] --rpc-url &lt;RPC_URL&gt; &lt;HASH&gt; [FIELD]
</code></pre>
<p>env: <code>ETH_RPC_URL</code></p>
<p>Where <code>[OPTIONS]</code> are <code>--json</code></p>
<p>Print information about a transaction or only one of its fields.</p>
<h5 id="example-41"><a class="header" href="#example-41">Example</a></h5>
<pre><code class="language-bash">$ cast tx --rpc-url &lt;your_rpc_url&gt; 0xf85ece86f9dec5bfa0357606a6afe0d696290cefe117194c8226ed4adfe228e7
accessList           []
blockHash            &quot;0x185fc0bf17167beb2a82311ec3739d560cc9107bc109f0e8ab73daf86573d5b8&quot;
blockNumber          &quot;0xd6e090&quot;
chainId              &quot;0x...
...
</code></pre>
<br>
<hr />
<h4 id="wallet"><a class="header" href="#wallet"><code>wallet</code></a></h4>
<pre><code class="language-ignore">cast wallet &lt;SUBCOMMAND&gt;
</code></pre>
<p>Where <code>&lt;SUBCOMMAND&gt;</code> can be:</p>
<ul>
<li><code>address</code> (convert a private key to an address)</li>
<li><code>new</code> (create and output a new random keypair)</li>
<li><code>sign</code> (sign the message with provided private key)</li>
<li><code>vanity</code> (generate a vanity address)</li>
<li><code>verify</code> (verify the signature on the message)</li>
</ul>
<p>Set of wallet management utilities.</p>
<p>Convert a private key to an address with <code>address</code>.</p>
<pre><code class="language-ignore">cast wallet address [OPTIONS]
</code></pre>
<p>Where <code>[OPTIONS]</code> are:</p>
<ul>
<li><code>--hd-path &lt;HD_PATH&gt;</code> (derivation path for your hardware wallet, trezor or ledger)</li>
<li><code>--interactive</code> (interactive prompt to insert your private key)</li>
<li><code>--keystore &lt;KEYSTORE_PATH&gt;</code> (path to your keystore folder / file) env: <code>ETH_KEYSTORE</code></li>
<li><code>--ledger</code> (use your Ledger hardware wallet)</li>
<li><code>--mnemonic-path &lt;MNEMONIC_PATH&gt;</code> (path to your mnemonic file)</li>
<li><code>--mnemonic_index &lt;MNEMONIC_INDEX&gt;</code> (your index in the standard hd path, default: 0)</li>
<li><code>--password &lt;KEYSTORE_PASSWORD&gt;</code> (your keystore password)</li>
<li><code>--private-key &lt;PRIVATE_KEY&gt;</code> (your private key string)</li>
<li><code>--trezor</code> (use your Trezor hardware wallet)</li>
</ul>
<h5 id="example-42"><a class="header" href="#example-42">Example</a></h5>
<pre><code class="language-bash">cast wallet address --interactive
Insert private key: &lt;PRIVATE_KEY&gt;

Address: 0xBC084F73B100b50057a5175816a8ce8CfaF43b1C
</code></pre>
<p>Create a new public / private keypair with <code>new</code>.</p>
<h5 id="example-43"><a class="header" href="#example-43">Example</a></h5>
<pre><code class="language-bash">$ cast wallet new
Successfully created new keypair.
Address: 0x19F4aB0c5ae1245F1E06798856815D82018AFE93
Private Key: &lt;PRIVATE_KEY&gt;
</code></pre>
<p>Sign a message with <code>sign</code>.</p>
<h5 id="example-44"><a class="header" href="#example-44">Example</a></h5>
<pre><code class="language-bash">$ cast wallet sign --interactive &quot;gm&quot;
Insert private key:

Signature: 0x22e3ad614cf53211b2ab164b4b46a39f878606f0c9e7b412c3ceb525f039fd1d50e72bdabaef42c295be0914d8c2b720001227d8c9f8d5e13103be65a0392acd1c
</code></pre>
<p>Create a new public / private keypair with a specific prefix with <code>vanity</code>.</p>
<h5 id="example-45"><a class="header" href="#example-45">Example</a></h5>
<pre><code class="language-bash">$ cast wallet vanity --starts-with beef
Starting to generate vanity address...
Successfully created new keypair in 3 seconds.
Address: 0xBEEf111188257c2008271dBD193999FD1516d787
Private Key: &lt;PRIVATE_KEY&gt;
</code></pre>
<p>Verify the signature on a message with <code>verify</code>.</p>
<h5 id="example-46"><a class="header" href="#example-46">Example</a></h5>
<pre><code class="language-bash">$ cast wallet verify --address 0xBEEf111188257c2008271dBD193999FD1516d787 &quot;gm&quot; 0x22e3ad614cf53211b2ab164b4b46a39f878606f0c9e7b412c3ceb525f0
39fd1d50e72bdabaef42c295be0914d8c2b720001227d8c9f8d5e13103be65a0392acd1c
Validation success. Address 0xBEEf111188257c2008271dBD193999FD1516d787 signed this message.
</code></pre>
<br>
<br>
<blockquote>
<p>ℹ️ <strong>Information</strong></p>
<p>Print help for any subcommand (or their subcommands) by adding <code>--help</code> at the end.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="foundrytoml-reference"><a class="header" href="#foundrytoml-reference"><code>foundry.toml</code> Reference</a></h2>
<p>Foundry's configuration system allows you to configure its tools.</p>
<h3 id="profiles"><a class="header" href="#profiles">Profiles</a></h3>
<p>Configuration can be arbitrarily namespaced into profiles. The default profile is named <code>default</code>, and all other profiles inherit values from this profile.</p>
<p>You can select the profile to use by setting the <code>FOUNDRY_PROFILE</code> environment variable.</p>
<h3 id="global-configuration"><a class="header" href="#global-configuration">Global configuration</a></h3>
<p>You can create a <code>foundry.toml</code> file in your home folder to configure Foundry globally.</p>
<h3 id="environment-variables"><a class="header" href="#environment-variables">Environment variables</a></h3>
<p>Configuration can be overriden with <code>FOUNDRY_</code> and <code>DAPP_</code> prefixed environment variables.</p>
<h3 id="configuration-format"><a class="header" href="#configuration-format">Configuration format</a></h3>
<p>Configuration files are written in the <a href="https://toml.io">TOML format</a>, with simple key-value pairs inside of sections. The following gives a quick overview of all settings (and their default values), with detailed descriptions found below.</p>
<pre><code class="language-toml">[default]
# The source directory
src = 'src'
# The test directory
test = 'test'
# The artifact directory
out = 'out'
# A list of paths to look for libraries in
libs = ['lib']
# A list of remappings
remappings = []
# A list of deployed libraries to link against
libraries = []
# Whether to cache builds or not
cache = true
# Whether to ignore the cache
force = false
# The EVM version by hardfork name
evm_version = 'london'
# Override the Solidity version (this overrides `auto_detect_solc`)
#solc_version = '0.8.10'
# Whether or not Forge should auto-detect the solc version to use
auto_detect_solc = true
# Disables downloading missing solc versions
offline = false
# Enables or disables the optimizer
optimizer = true
# The number of optimizer runs
optimizer_runs = 200
# The verbosity of tests
verbosity = 0
# A list of ignored solc error codes
ignored_error_codes = []
# The number of fuzz runs for fuzz tests
fuzz_runs = 256
# The max number of individual inputs that may be rejected before a fuzz test aborts
fuzz_max_local_rejects = 65536
# The max number of combined inputs that may be rejected before a fuzz test aborts
fuzz_max_global_rejects = 1024
# Whether or not to enable `cheats.ffi`
ffi = false
# The address of `msg.sender` in tests
sender = '0x00a329c0648769a73afac7f9381e08fb43dbea72'
# The address of `tx.origin` in tests
tx_origin = '0x00a329c0648769a73afac7f9381e08fb43dbea72'
# The initial balance of the test contract
initial_balance = '0xffffffffffffffffffffffff'
# The block number we are at in tests
block_number = 0
# The chain ID we are on in tests
chain_id = 99
# The gas limit in tests
gas_limit = 9223372036854775807
# The gas price in tests (in wei)
gas_price = 0
# The block basefee in tests (in wei)
block_base_fee_per_gas = 0
# The address of `block.coinbase` in tests
block_coinbase = '0x0000000000000000000000000000000000000000'
# The block timestamp in tests
block_timestamp = 0
# The block difficulty in tests
block_difficulty = 0
# A list of contracts to output gas reports for
gas_reports = [&quot;*&quot;]
# Enables or disables RPC caching when forking
no_storage_caching = false
# Caches storage retrieved locally for certain chains and endpoints
# Can also be restricted to multiple chains
# By default only remote endpoints will be cached
# To disable storage caching, set `no_storage_caching = true`
rpc_storage_caching = { chains = &quot;all&quot;, endpoints = &quot;remote&quot; }
</code></pre>
<h3 id="configuration-keys"><a class="header" href="#configuration-keys">Configuration keys</a></h3>
<p>This section documents all configuration keys. All configuration keys must live under a profile, such as <code>default</code>.</p>
<h4 id="project"><a class="header" href="#project">Project</a></h4>
<p>Configuration related to the project in general.</p>
<h5 id="src"><a class="header" href="#src"><code>src</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: src</li>
<li>Environment: <code>FOUNDRY_SRC</code> or <code>DAPP_SRC</code></li>
</ul>
<p>The path to the contract sources relative to the root of the project.</p>
<h5 id="test"><a class="header" href="#test"><code>test</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: test</li>
<li>Environment: <code>FOUNDRY_TEST</code> or <code>DAPP_TEST</code></li>
</ul>
<p>The path to the test contract sources relative to the root of the project.</p>
<h5 id="out"><a class="header" href="#out"><code>out</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: out</li>
<li>Environment: <code>FOUNDRY_OUT</code> or <code>DAPP_OUT</code></li>
</ul>
<p>The path to put contract artifacts in, relative to the root of the project.</p>
<h5 id="libs"><a class="header" href="#libs"><code>libs</code></a></h5>
<ul>
<li>Type: array of strings (paths)</li>
<li>Default: lib</li>
<li>Environment: <code>FOUNDRY_LIBS</code> or <code>DAPP_LIBS</code></li>
</ul>
<p>An array of paths that contain libraries, relative to the root of the project.</p>
<h5 id="cache"><a class="header" href="#cache"><code>cache</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true</li>
<li>Environment: <code>FOUNDRY_CACHE</code> or <code>DAPP_CACHE</code></li>
</ul>
<p>Whether or not to enable caching. If enabled, the result of compiling sources, tests, and dependencies, are cached in <code>cache</code>.</p>
<h5 id="force"><a class="header" href="#force"><code>force</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>FOUNDRY_FORCE</code> or <code>DAPP_FORCE</code></li>
</ul>
<p>Whether or not to perform a clean build, discarding the cache.</p>
<h4 id="solidity-compiler"><a class="header" href="#solidity-compiler">Solidity compiler</a></h4>
<p>Configuration related to the behavior of the Solidity compiler.</p>
<h5 id="remappings"><a class="header" href="#remappings"><code>remappings</code></a></h5>
<ul>
<li>Type: array of strings (remappings)</li>
<li>Default: none</li>
<li>Environment: <code>FOUNDRY_REMAPPINGS</code> or <code>DAPP_REMAPPINGS</code></li>
</ul>
<p>An array of remappings in the following format: <code>&lt;name&gt;=&lt;target&gt;</code>.</p>
<p>A remapping <em>remaps</em> Solidity imports to different directories. For example, the following remapping</p>
<pre><code class="language-ignore">@openzeppelin/=node_modules/@openzeppelin/openzeppelin-contracts/
</code></pre>
<p>with an import like</p>
<pre><code class="language-solidity">import &quot;@openzeppelin/contracts/utils/Context.sol&quot;;
</code></pre>
<p>becomes</p>
<pre><code class="language-solidity">import &quot;node_modules/@openzeppelin/openzeppelin-contracts/contracts/utils/Context.sol&quot;;
</code></pre>
<h5 id="libraries"><a class="header" href="#libraries"><code>libraries</code></a></h5>
<ul>
<li>Type: array of strings (libraries)</li>
<li>Default: none</li>
<li>Environment: <code>FOUNDRY_LIBRARIES</code> or <code>DAPP_LIBRARIES</code></li>
</ul>
<p>An array of libraries to link against in the following format: <code>&lt;file&gt;:&lt;lib&gt;:&lt;address&gt;</code>, for example: <code>src/MyLibrary.sol:MyLibrary:0xfD88CeE74f7D78697775aBDAE53f9Da1559728E4</code>.</p>
<h5 id="solc_version"><a class="header" href="#solc_version"><code>solc_version</code></a></h5>
<ul>
<li>Type: string (semver)</li>
<li>Default: none</li>
<li>Environment: <code>FOUNDRY_SOLC_VERSION</code> or <code>DAPP_SOLC_VERSION</code></li>
</ul>
<p>If specified, overrides the auto-detection system (more below) and uses a single Solidity compiler version for the project.</p>
<p>Only strict versions are supported (i.e. <code>0.8.11</code> is valid, but <code>^0.8.0</code> is not).</p>
<h5 id="auto_detect_solc"><a class="header" href="#auto_detect_solc"><code>auto_detect_solc</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true</li>
<li>Environment: <code>FOUNDRY_AUTO_DETECT_SOLC</code> or <code>DAPP_AUTO_DETECT_SOLC</code></li>
</ul>
<p>If enabled, Foundry will automatically try to resolve appropriate Solidity compiler versions to compile your project.</p>
<p>This key is ignored if <code>solc_version</code> is set.</p>
<h5 id="offline"><a class="header" href="#offline"><code>offline</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>FOUNDRY_OFFLINE</code> or <code>DAPP_OFFLINE</code></li>
</ul>
<p>If enabled, Foundry will not attempt to download any missing solc versions.</p>
<p>If both <code>offline</code> and <code>auto-detect-solc</code> are set to <code>true</code>, the required version(s) of solc will be auto detected but any missing versions will <em>not</em> be installed.</p>
<h5 id="optimizer"><a class="header" href="#optimizer"><code>optimizer</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true</li>
<li>Environment: <code>FOUNDRY_OPTIMIZER</code> or <code>DAPP_OPTIMIZER</code></li>
</ul>
<p>Whether or not to enable the Solidity compiler optimizer.</p>
<h5 id="optimizer_runs"><a class="header" href="#optimizer_runs"><code>optimizer_runs</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 200</li>
<li>Environment: <code>FOUNDRY_OPTIMIZER_RUNS</code> or <code>DAPP_OPTIMIZER_RUNS</code></li>
</ul>
<p>The amount of optimizer runs to perform.</p>
<h5 id="ignored_error_codes"><a class="header" href="#ignored_error_codes"><code>ignored_error_codes</code></a></h5>
<ul>
<li>Type: array of integers</li>
<li>Default: none for source, SPDX license identifiers and contract size for tests</li>
<li>Environment: <code>FOUNDRY_IGNORED_ERROR_CODES</code> or <code>DAPP_IGNORED_ERROR_CODES</code></li>
</ul>
<p>An array of Solidity compiler error codes to ignore during build, such as warnings.</p>
<h4 id="tests-1"><a class="header" href="#tests-1">Tests</a></h4>
<p>Configuration related to the behavior of <code>forge test</code>.</p>
<h5 id="verbosity"><a class="header" href="#verbosity"><code>verbosity</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_VERBOSITY</code> or <code>DAPP_VERBOSITY</code></li>
</ul>
<p>The verbosity level to use during tests.</p>
<ul>
<li><strong>Level 2 (<code>-vv</code>)</strong>: Logs emitted during tests are also displayed.</li>
<li><strong>Level 3 (<code>-vvv</code>)</strong>: Stack traces for failing tests are also displayed.</li>
<li><strong>Level 4 (<code>-vvvv</code>)</strong>: Stack traces for all tests are displayed, and setup traces for failing tests are displayed.</li>
<li><strong>Level 5 (<code>-vvvvv</code>)</strong>: Stack traces and setup traces are always displayed.</li>
</ul>
<h5 id="evm_version"><a class="header" href="#evm_version"><code>evm_version</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: london</li>
<li>Environment: <code>FOUNDRY_EVM_VERSION</code> or <code>DAPP_EVM_VERSION</code></li>
</ul>
<p>The EVM version to use during tests. The value <strong>must</strong> be an EVM hardfork name, such as <code>london</code>, <code>byzantium</code>, etc.</p>
<h5 id="fuzz_runs"><a class="header" href="#fuzz_runs"><code>fuzz_runs</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 256</li>
<li>Environment: <code>FOUNDRY_FUZZ_RUNS</code> or <code>DAPP_FUZZ_RUNS</code></li>
</ul>
<p>The amount of fuzz runs to perform for each fuzz test case. Higher values gives more confidence in results at the cost of testing speed.</p>
<h5 id="fuzz_max_local_rejects"><a class="header" href="#fuzz_max_local_rejects"><code>fuzz_max_local_rejects</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 1024</li>
<li>Environment: <code>FOUNDRY_FUZZ_MAX_LOCAL_REJECTS</code></li>
</ul>
<p>The maximum number of individual inputs that may be rejected before the test as a whole aborts.
&quot;Local&quot; filters apply to a single strategy. If a value is rejected, a new value is drawn from that strategy only.</p>
<h5 id="fuzz_max_global_rejects"><a class="header" href="#fuzz_max_global_rejects"><code>fuzz_max_global_rejects</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 65536</li>
<li>Environment: <code>FOUNDRY_FUZZ_MAX_GLOBAL_REJECTS</code></li>
</ul>
<p>The maximum number of combined inputs that may be rejected before the test as a whole aborts.
&quot;Global&quot; filters apply to the whole test case. If the test case is rejected, the whole thing is regenerated.</p>
<h5 id="ffi"><a class="header" href="#ffi"><code>ffi</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>FOUNDRY_FFI</code> or <code>DAPP_FFI</code></li>
</ul>
<p>Whether or not to enable the <code>ffi</code> cheatcode.</p>
<p><strong>Warning:</strong> Enabling this cheatcode has security implications for your project, as it allows tests to execute arbitrary programs on your computer.</p>
<h5 id="sender"><a class="header" href="#sender"><code>sender</code></a></h5>
<ul>
<li>Type: string (address)</li>
<li>Default: 0x00a329c0648769a73afac7f9381e08fb43dbea72</li>
<li>Environment: <code>FOUNDRY_SENDER</code> or <code>DAPP_SENDER</code></li>
</ul>
<p>The value of <code>msg.sender</code> in tests.</p>
<h5 id="tx_origin"><a class="header" href="#tx_origin"><code>tx_origin</code></a></h5>
<ul>
<li>Type: string (address)</li>
<li>Default: 0x00a329c0648769a73afac7f9381e08fb43dbea72</li>
<li>Environment: <code>FOUNDRY_TX_ORIGIN</code> or <code>DAPP_TX_ORIGIN</code></li>
</ul>
<p>The value of <code>tx.origin</code> in tests.</p>
<h5 id="initial_balance"><a class="header" href="#initial_balance"><code>initial_balance</code></a></h5>
<ul>
<li>Type: string (hexadecimal)</li>
<li>Default: 0xffffffffffffffffffffffff</li>
<li>Environment: <code>FOUNDRY_INITIAL_BALANCE</code> or <code>DAPP_INITIAL_BALANCE</code></li>
</ul>
<p>The initial balance of the test contracts in wei, written in hexadecimal.</p>
<h5 id="block_number"><a class="header" href="#block_number"><code>block_number</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_BLOCK_NUMBER</code> or <code>DAPP_BLOCK_NUMBER</code></li>
</ul>
<p>The value of <code>block.number</code> in tests.</p>
<h5 id="chain_id"><a class="header" href="#chain_id"><code>chain_id</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 99</li>
<li>Environment: <code>FOUNDRY_CHAIN_ID</code> or <code>DAPP_CHAIN_ID</code></li>
</ul>
<p>The value of the <code>chainid</code> opcode in tests.</p>
<h5 id="gas_limit"><a class="header" href="#gas_limit"><code>gas_limit</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 9223372036854775807</li>
<li>Environment: <code>FOUNDRY_GAS_LIMIT</code> or <code>DAPP_GAS_LIMIT</code></li>
</ul>
<p>The gas limit for each test case.</p>
<h5 id="gas_price"><a class="header" href="#gas_price"><code>gas_price</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_GAS_PRICE</code> or <code>DAPP_GAS_PRICE</code></li>
</ul>
<p>The price of gas (in wei) in tests.</p>
<h5 id="block_base_fee_per_gas"><a class="header" href="#block_base_fee_per_gas"><code>block_base_fee_per_gas</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_BLOCK_BASE_FEE_PER_GAS</code> or <code>DAPP_BLOCK_BASE_FEE_PER_GAS</code></li>
</ul>
<p>The base fee per gas (in wei) in tests.</p>
<h5 id="block_coinbase"><a class="header" href="#block_coinbase"><code>block_coinbase</code></a></h5>
<ul>
<li>Type: string (address)</li>
<li>Default: 0x0000000000000000000000000000000000000000</li>
<li>Environment: <code>FOUNDRY_BLOCK_COINBASE</code> or <code>DAPP_BLOCK_COINBASE</code></li>
</ul>
<p>The value of <code>block.coinbase</code> in tests.</p>
<h5 id="block_timestamp"><a class="header" href="#block_timestamp"><code>block_timestamp</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_BLOCK_TIMESTAMP</code> or <code>DAPP_BLOCK_TIMESTAMP</code></li>
</ul>
<p>The value of <code>block.timestamp</code> in tests.</p>
<h5 id="block_difficulty"><a class="header" href="#block_difficulty"><code>block_difficulty</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 0</li>
<li>Environment: <code>FOUNDRY_BLOCK_DIFFICULTY</code> or <code>DAPP_BLOCK_DIFFICULTY</code></li>
</ul>
<p>The value of <code>block.difficulty</code> in tests.</p>
<h5 id="gas_reports"><a class="header" href="#gas_reports"><code>gas_reports</code></a></h5>
<ul>
<li>Type: array of strings (contract names)</li>
<li>Default: [&quot;*&quot;]</li>
<li>Environment: <code>FOUNDRY_GAS_REPORTS</code> or <code>DAPP_GAS_REPORTS</code></li>
</ul>
<p>The contracts to print gas reports for.</p>
<h5 id="no_storage_caching"><a class="header" href="#no_storage_caching"><code>no_storage_caching</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>FOUNDRY_NO_STORAGE_CACHING</code> or <code>DAPP_NO_STORAGE_CACHING</code></li>
</ul>
<p>If set to <code>true</code>, then block data from RPC endpoints in tests will not be cached. Otherwise, the data is cached to <code>$HOME/.foundry/cache/&lt;chain id&gt;/&lt;block number&gt;</code>.</p>
<h5 id="rpc_storage_caching"><a class="header" href="#rpc_storage_caching"><code>[rpc_storage_caching]</code></a></h5>
<p>The <code>[rpc_storage_caching]</code> block determines what RPC endpoints are cached.</p>
<h6 id="rpc_storage_cachingchains"><a class="header" href="#rpc_storage_cachingchains"><code>rpc_storage_caching.chains</code></a></h6>
<ul>
<li>Type: string or array of strings (chain names)</li>
<li>Default: all</li>
<li>Environment: N/A</li>
</ul>
<p>Determines what chains are cached. By default, all chains are cached.</p>
<p>Valid values are:</p>
<ul>
<li>&quot;all&quot;</li>
<li>A list of chain names, e.g. <code>[&quot;optimism&quot;, &quot;mainnet&quot;]</code></li>
</ul>
<h6 id="rpc_storage_cachingendpoints"><a class="header" href="#rpc_storage_cachingendpoints"><code>rpc_storage_caching.endpoints</code></a></h6>
<ul>
<li>Type: string or array of regex patterns (to match URLs)</li>
<li>Default: remote</li>
<li>Environment: N/A</li>
</ul>
<p>Determines what RPC endpoints are cached. By default, only remote endpoints are cached.</p>
<p>Valid values are:</p>
<ul>
<li>&quot;all&quot;</li>
<li>&quot;remote&quot;</li>
<li>A list of regex patterns, e.g. <code>[&quot;localhost&quot;]</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ds-test-reference"><a class="header" href="#ds-test-reference"><code>ds-test</code> Reference</a></h2>
<p><code>ds-test</code> provides basic logging and assertion functionality.</p>
<p>To use it in your testing contract, import <code>ds-test/test.sol</code> and inherit from <code>DSTest</code>, like so:</p>
<pre><code class="language-solidity">import &quot;ds-test/test.sol&quot;;

contract ContractTest is DSTest {
    // ... tests ...
}
</code></pre>
<h3 id="cheatcodes-address"><a class="header" href="#cheatcodes-address">Cheatcodes Address</a></h3>
<p>You can get the address of the cheatcodes account by accessing the <code>HEVM_ADDRESS</code> constant:</p>
<pre><code class="language-solidity">Cheats cheats = Cheats(HEVM_ADDRESS);
</code></pre>
<h3 id="logging"><a class="header" href="#logging">Logging</a></h3>
<p>This is a complete overview of all the available logging events. For detailed descriptions and example usage, see below.</p>
<pre><code class="language-solidity">event log                    (string);
event logs                   (bytes);

event log_address            (address);
event log_bytes32            (bytes32);
event log_int                (int);
event log_uint               (uint);
event log_bytes              (bytes);
event log_string             (string);

event log_named_address      (string key, address val);
event log_named_bytes32      (string key, bytes32 val);
event log_named_decimal_int  (string key, int val, uint decimals);
event log_named_decimal_uint (string key, uint val, uint decimals);
event log_named_int          (string key, int val);
event log_named_uint         (string key, uint val);
event log_named_bytes        (string key, bytes val);
event log_named_string       (string key, string val);
</code></pre>
<h3 id="logging-events"><a class="header" href="#logging-events">Logging events</a></h3>
<p>This section documents all events for logging and provides usage examples. </p>
<h4 id="log"><a class="header" href="#log"><code>log</code></a></h4>
<pre><code class="language-solidity">event log(string);
</code></pre>
<h5 id="example-47"><a class="header" href="#example-47">Example</a></h5>
<pre><code class="language-solidity">emit log(&quot;here&quot;);
// here
</code></pre>
<br>
<hr />
<h4 id="logs"><a class="header" href="#logs">logs</a></h4>
<pre><code class="language-solidity">event logs(bytes);
</code></pre>
<h5 id="example-48"><a class="header" href="#example-48">Example</a></h5>
<pre><code class="language-solidity">emit logs(bytes(&quot;abcd&quot;));
// 0x6162636400000000000000000000000000000000000000000000000000000000
</code></pre>
<br>
<hr />
<h4 id="log_type"><a class="header" href="#log_type">log_&lt;type&gt;</a></h4>
<pre><code class="language-solidity">event log_&lt;type&gt;(&lt;type&gt;);
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>address</code>, <code>bytes32</code>, <code>int</code>, <code>uint</code>, <code>bytes</code>, <code>string</code></p>
<h5 id="example-49"><a class="header" href="#example-49">Example</a></h5>
<pre><code class="language-solidity">uint256 amount = 1 ether;
emit log_uint(amount);
// 1000000000000000000
</code></pre>
<br>
<hr />
<h4 id="log_named_type"><a class="header" href="#log_named_type">log_named_&lt;type&gt;</a></h4>
<pre><code class="language-solidity">event log_named_&lt;type&gt;(string key, &lt;type&gt; val);
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>address</code>, <code>bytes32</code>, <code>int</code>, <code>uint</code>, <code>bytes</code>, <code>string</code></p>
<h5 id="example-50"><a class="header" href="#example-50">Example</a></h5>
<pre><code class="language-solidity">uint256 amount = 1 ether;
emit log_named_uint(&quot;Amount: &quot;, amount);
// amount: 1000000000000000000
</code></pre>
<br>
<hr />
<h4 id="log_named_decimal_type"><a class="header" href="#log_named_decimal_type">log_named_decimal_&lt;type&gt;</a></h4>
<pre><code class="language-solidity">event log_named_decimal_&lt;type&gt;(string key, &lt;type&gt; val, uint decimals);
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<h5 id="example-51"><a class="header" href="#example-51">Example</a></h5>
<pre><code class="language-solidity">uint256 amount = 1 ether;
emit log_named_decimal_uint(&quot;Amount: &quot;, amount, 18);
// amount: 1.000000000000000000
</code></pre>
<h3 id="asserting"><a class="header" href="#asserting">Asserting</a></h3>
<p>This is a complete overview of all the available assertion functions. For detailed descriptions and example usage, see below.</p>
<pre><code class="language-solidity">// Assert the `condition` is true
function assertTrue(bool condition) internal;
function assertTrue(bool condition, string memory err) internal;

// Assert `a` is equal to `b`
function assertEq(address a, address b) internal;
function assertEq(address a, address b, string memory err) internal;
function assertEq(bytes32 a, bytes32 b) internal;
function assertEq(bytes32 a, bytes32 b, string memory err) internal;
function assertEq(int a, int b) internal;
function assertEq(int a, int b, string memory err) internal;
function assertEq(uint a, uint b) internal;
function assertEq(uint a, uint b, string memory err) internal;
function assertEqDecimal(int a, int b, uint decimals) internal;
function assertEqDecimal(int a, int b, uint decimals, string memory err) internal;
function assertEqDecimal(uint a, uint b, uint decimals) internal;
function assertEqDecimal(uint a, uint b, uint decimals, string memory err) internal;
function assertEq(string memory a, string memory b) internal;
function assertEq(string memory a, string memory b, string memory err) internal;
function assertEq32(bytes32 a, bytes32 b) internal;
function assertEq32(bytes32 a, bytes32 b, string memory err) internal;
function assertEq0(bytes memory a, bytes memory b) internal;
function assertEq0(bytes memory a, bytes memory b, string memory err) internal;

// Assert  `a` is greater than `b`
function assertGt(uint a, uint b) internal;
function assertGt(uint a, uint b, string memory err) internal;
function assertGt(int a, int b) internal;
function assertGt(int a, int b, string memory err) internal;
function assertGtDecimal(int a, int b, uint decimals) internal;
function assertGtDecimal(int a, int b, uint decimals, string memory err) internal;
function assertGtDecimal(uint a, uint b, uint decimals) internal;
function assertGtDecimal(uint a, uint b, uint decimals, string memory err) internal;

// Assert  `a` is greater than or equal to `b`
function assertGe(uint a, uint b) internal;
function assertGe(uint a, uint b, string memory err) internal;
function assertGe(int a, int b) internal;
function assertGe(int a, int b, string memory err) internal;
function assertGeDecimal(int a, int b, uint decimals) internal;
function assertGeDecimal(int a, int b, uint decimals, string memory err) internal;
function assertGeDecimal(uint a, uint b, uint decimals) internal;
function assertGeDecimal(uint a, uint b, uint decimals, string memory err) internal;

// Assert  `a` is lesser than `b`
function assertLt(uint a, uint b) internal;
function assertLt(uint a, uint b, string memory err) internal;
function assertLt(int a, int b) internal;
function assertLt(int a, int b, string memory err) internal;
function assertLtDecimal(int a, int b, uint decimals) internal;
function assertLtDecimal(int a, int b, uint decimals, string memory err) internal;
function assertLtDecimal(uint a, uint b, uint decimals) internal;
function assertLtDecimal(uint a, uint b, uint decimals, string memory err) internal;

// Assert  `a` is lesser than or equal to `b`
function assertLe(uint a, uint b) internal;
function assertLe(uint a, uint b, string memory err) internal;
function assertLe(int a, int b) internal;
function assertLe(int a, int b, string memory err) internal;
function assertLeDecimal(int a, int b, uint decimals) internal;
function assertLeDecimal(int a, int b, uint decimals, string memory err) internal;
function assertLeDecimal(uint a, uint b, uint decimals) internal;
function assertLeDecimal(uint a, uint b, uint decimals, string memory err) internal;
</code></pre>
<h3 id="assertion-functions"><a class="header" href="#assertion-functions">Assertion functions</a></h3>
<p>This section documents all functions for asserting and provides usage examples. </p>
<h4 id="asserttrue"><a class="header" href="#asserttrue"><code>assertTrue</code></a></h4>
<pre><code class="language-solidity">function assertTrue(bool condition) internal;
</code></pre>
<p>Asserts the <code>condition</code> is true.</p>
<h5 id="example-52"><a class="header" href="#example-52">Example</a></h5>
<pre><code class="language-solidity">bool success = contract.fun();
assertTrue(success);
</code></pre>
<br>
<hr />
<h4 id="asserteq"><a class="header" href="#asserteq"><code>assertEq</code></a></h4>
<pre><code class="language-solidity">function assertEq(&lt;type&gt; a, &lt;type&gt; b) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>address</code>, <code>bytes32</code>, <code>int</code>, <code>uint</code></p>
<p>Asserts <code>a</code> is equal to <code>b</code>.</p>
<h5 id="example-53"><a class="header" href="#example-53">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertEq(a, b);
</code></pre>
<br>
<hr />
<h4 id="asserteqdecimal"><a class="header" href="#asserteqdecimal"><code>assertEqDecimal</code></a></h4>
<pre><code class="language-solidity">function assertEqDecimal(&lt;type&gt; a, &lt;type&gt; b, uint decimals) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts <code>a</code> is equal to <code>b</code>.</p>
<h5 id="example-54"><a class="header" href="#example-54">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertEqDecimal(a, b, 18);
</code></pre>
<br>
<hr />
<h4 id="asserteq32"><a class="header" href="#asserteq32"><code>assertEq32</code></a></h4>
<pre><code class="language-solidity">function assertEq32(bytes32 a, bytes32 b) internal;
</code></pre>
<p>Asserts <code>a</code> is equal to <code>b</code>.</p>
<h5 id="example-55"><a class="header" href="#example-55">Example</a></h5>
<pre><code class="language-solidity">assertEq(bytes32(&quot;abcd&quot;), 0x6162636400000000000000000000000000000000000000000000000000000000);
</code></pre>
<br>
<hr />
<h4 id="asserteq0"><a class="header" href="#asserteq0"><code>assertEq0</code></a></h4>
<pre><code class="language-solidity">function assertEq0(bytes a, bytes b) internal;
</code></pre>
<p>Asserts <code>a</code> is equal to <code>b</code>.</p>
<h5 id="example-56"><a class="header" href="#example-56">Example</a></h5>
<pre><code class="language-solidity">string memory name1 = &quot;Alice&quot;;
string memory name2 = &quot;Bob&quot;;
assertEq0(bytes(name1), bytes(name2)); // [FAIL]
</code></pre>
<br>
<hr />
<h4 id="assertgt"><a class="header" href="#assertgt"><code>assertGt</code></a></h4>
<pre><code class="language-solidity">function assertGt(&lt;type&gt; a, &lt;type&gt; b) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is greater than <code>b</code>.</p>
<h5 id="example-57"><a class="header" href="#example-57">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 2 ether;
uint256 b = 1e18 wei;
assertGt(a, b);
</code></pre>
<br>
<hr />
<h4 id="assertgtdecimal"><a class="header" href="#assertgtdecimal"><code>assertGtDecimal</code></a></h4>
<pre><code class="language-solidity">function assertGtDecimal(&lt;type&gt; a, &lt;type&gt; b, uint decimals) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is greater than <code>b</code>.</p>
<h5 id="example-58"><a class="header" href="#example-58">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 2 ether;
uint256 b = 1e18 wei;
assertGtDecimal(a, b, 18);
</code></pre>
<br>
<hr />
<h4 id="assertge"><a class="header" href="#assertge"><code>assertGe</code></a></h4>
<pre><code class="language-solidity">function assertGe(&lt;type&gt; a, &lt;type&gt; b) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is greater than or equal to <code>b</code>.</p>
<h5 id="example-59"><a class="header" href="#example-59">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertGe(a, b);
</code></pre>
<br>
<hr />
<h4 id="assertgedecimal"><a class="header" href="#assertgedecimal"><code>assertGeDecimal</code></a></h4>
<pre><code class="language-solidity">function assertGeDecimal(&lt;type&gt; a, &lt;type&gt; b, uint decimals) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is greater than or equal to <code>b</code>.</p>
<h5 id="example-60"><a class="header" href="#example-60">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertGeDecimal(a, b, 18);
</code></pre>
<br>
<hr />
<h4 id="assertlt"><a class="header" href="#assertlt"><code>assertLt</code></a></h4>
<pre><code class="language-solidity">function assertLt(&lt;type&gt; a, &lt;type&gt; b) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is lesser than <code>b</code>.</p>
<h5 id="example-61"><a class="header" href="#example-61">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 2e18 wei;
assertLt(a, b);
</code></pre>
<br>
<hr />
<h4 id="assertltdecimal"><a class="header" href="#assertltdecimal"><code>assertLtDecimal</code></a></h4>
<pre><code class="language-solidity">function assertLtDecimal(&lt;type&gt; a, &lt;type&gt; b, uint decimals) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is lesser than <code>b</code>.</p>
<h5 id="example-62"><a class="header" href="#example-62">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 2e18 wei;
assertLtDecimal(a, b, 18);
</code></pre>
<br>
<hr />
<h4 id="assertle"><a class="header" href="#assertle"><code>assertLe</code></a></h4>
<pre><code class="language-solidity">function assertLe(&lt;type&gt; a, &lt;type&gt; b) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is lesser than or equal to <code>b</code>.</p>
<h5 id="example-63"><a class="header" href="#example-63">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertLe(a, b);
</code></pre>
<br>
<hr />
<h4 id="assertledecimal"><a class="header" href="#assertledecimal"><code>assertLeDecimal</code></a></h4>
<pre><code class="language-solidity">function assertLeDecimal(&lt;type&gt; a, &lt;type&gt; b, uint decimals) internal;
</code></pre>
<p>Where <code>&lt;type&gt;</code> can be <code>int</code>, <code>uint</code></p>
<p>Asserts  <code>a</code> is lesser than or equal to <code>b</code>.</p>
<h5 id="example-64"><a class="header" href="#example-64">Example</a></h5>
<pre><code class="language-solidity">uint256 a = 1 ether;
uint256 b = 1e18 wei;
assertLeDecimal(a, b, 18);
</code></pre>
<br>
<blockquote>
<p>ℹ️ <strong>Information</strong></p>
<p>You can pass a custom error message to the above functions by providing an additional parameter <code>string err</code>.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cheatcodes-reference"><a class="header" href="#cheatcodes-reference">Cheatcodes Reference</a></h2>
<p>Cheatcodes give you powerful assertions, the ability to alter the state of the EVM, mock data, and more.</p>
<p>To enable a cheatcode you call designated functions on the cheatcode address: <code>0x7109709ECfa91a80626fF3989D68f67F5b1DD12D</code>.</p>
<p>This address can be accessed through the <code>HEVM_ADDRESS</code> constant in <code>DSTest</code>.</p>
<p>Below are some subsections for the different cheatcodes in Forge.</p>
<ul>
<li><a href="cheatcodes/./environment.html">Environment</a>: Cheatcodes that alter the state of the EVM.</li>
<li><a href="cheatcodes/./assertions.html">Assertions</a>: Cheatcodes that are powerful assertions</li>
<li><a href="cheatcodes/./fuzzer.html">Fuzzer</a>: Cheatcodes that configure the fuzzer</li>
<li><a href="cheatcodes/./external.html">External</a>: Cheatcodes that interact with external state (files, commands, ...)</li>
<li><a href="cheatcodes/./utilities.html">Utilities</a>: Smaller utility cheatcodes</li>
</ul>
<h3 id="cheatcodes-interface"><a class="header" href="#cheatcodes-interface">Cheatcodes Interface</a></h3>
<p>This is a Solidity interface for all of the cheatcodes present in Forge.</p>
<pre><code class="language-solidity">interface CheatCodes {
    // Set block.timestamp
    function warp(uint256) external;

    // Set block.number
    function roll(uint256) external;

    // Set block.basefee
    function fee(uint256) external;

    // Loads a storage slot from an address
    function load(address account, bytes32 slot) external returns (bytes32);

    // Stores a value to an address' storage slot
    function store(address account, bytes32 slot, bytes32 value) external;

    // Signs data
    function sign(uint256 privateKey, bytes32 digest) external returns (uint8 v, bytes32 r, bytes32 s);

    // Computes address for a given private key
    function addr(uint256 privateKey) external returns (address);

    // Gets the nonce of an account
    function getNonce(address account) external returns (uint64);

    // Sets the nonce of an account
    // The new nonce must be higher than the current nonce of the account
    function getNonce(address account, uint256 nonce) external;

    // Performs a foreign function call via terminal
    function ffi(string[] calldata) external returns (bytes memory);

    // Sets the *next* call's msg.sender to be the input address
    function prank(address) external;

    // Sets all subsequent calls' msg.sender to be the input address until `stopPrank` is called
    function startPrank(address) external;

    // Sets the *next* call's msg.sender to be the input address, and the tx.origin to be the second input
    function prank(address, address) external;

    // Sets all subsequent calls' msg.sender to be the input address until `stopPrank` is called, and the tx.origin to be the second input
    function startPrank(address, address) external;

    // Resets subsequent calls' msg.sender to be `address(this)`
    function stopPrank() external;

    // Sets an address' balance
    function deal(address who, uint256 newBalance) external;

    // Sets an address' code
    function etch(address who, bytes calldata code) external;

    // Expects an error on next call
    function expectRevert() external;
    function expectRevert(bytes calldata) external;
    function expectRevert(bytes4) external;

    // Record all storage reads and writes
    function record() external;

    // Gets all accessed reads and write slot from a recording session, for a given address
    function accesses(address) external returns (bytes32[] memory reads, bytes32[] memory writes);

    // Prepare an expected log with (bool checkTopic1, bool checkTopic2, bool checkTopic3, bool checkData).
    // Call this function, then emit an event, then call a function. Internally after the call, we check if
    // logs were emitted in the expected order with the expected topics and data (as specified by the booleans)
    function expectEmit(bool, bool, bool, bool) external;

    // Mocks a call to an address, returning specified data.
    // Calldata can either be strict or a partial match, e.g. if you only
    // pass a Solidity selector to the expected calldata, then the entire Solidity
    // function will be mocked.
    function mockCall(address, bytes calldata, bytes calldata) external;

    // Clears all mocked calls
    function clearMockedCalls() external;

    // Expect a call to an address with the specified calldata.
    // Calldata can either be strict or a partial match
    function expectCall(address, bytes calldata) external;

    // Gets the bytecode for a contract in the project given the path to the contract.
    function getCode(string calldata) external returns (bytes memory);

    // Label an address in test traces
    function label(address addr, string calldata label) external;

    // When fuzzing, generate new inputs if conditional not met
    function assume(bool) external;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="environment"><a class="header" href="#environment">Environment</a></h2>
<ul>
<li><a href="cheatcodes/./warp.html"><code>warp</code></a></li>
<li><a href="cheatcodes/./roll.html"><code>roll</code></a></li>
<li><a href="cheatcodes/./fee.html"><code>fee</code></a></li>
<li><a href="cheatcodes/./store.html"><code>store</code></a></li>
<li><a href="cheatcodes/./load.html"><code>load</code></a></li>
<li><a href="cheatcodes/./etch.html"><code>etch</code></a></li>
<li><a href="cheatcodes/./deal.html"><code>deal</code></a></li>
<li><a href="cheatcodes/./prank.html"><code>prank</code></a></li>
<li><a href="cheatcodes/./start-prank.html"><code>startPrank</code></a></li>
<li><a href="cheatcodes/./stop-prank.html"><code>stopPrank</code></a></li>
<li><a href="cheatcodes/./record.html"><code>record</code></a></li>
<li><a href="cheatcodes/./accesses.html"><code>accesses</code></a></li>
<li><a href="cheatcodes/./set-nonce.html"><code>setNonce</code></a></li>
<li><a href="cheatcodes/./get-nonce.html"><code>getNonce</code></a></li>
<li><a href="cheatcodes/./mock-call.html"><code>mockCall</code></a></li>
<li><a href="cheatcodes/./clear-mocked-calls.html"><code>clearMockedCalls</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="warp"><a class="header" href="#warp"><code>warp</code></a></h2>
<h3 id="signature"><a class="header" href="#signature">Signature</a></h3>
<pre><code class="language-solidity">function warp(uint256) external;
</code></pre>
<h3 id="description"><a class="header" href="#description">Description</a></h3>
<p>Sets <code>block.timestamp</code>.</p>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<pre><code class="language-solidity">cheats.warp(1641070800);
emit log_uint(block.timestamp); // 1641070800
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="roll"><a class="header" href="#roll"><code>roll</code></a></h2>
<h3 id="signature-1"><a class="header" href="#signature-1">Signature</a></h3>
<pre><code class="language-solidity">function roll(uint256) external;
</code></pre>
<h3 id="description-1"><a class="header" href="#description-1">Description</a></h3>
<p>Sets <code>block.number</code>.</p>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<pre><code class="language-solidity">cheats.roll(100);
emit log_uint(block.number); // 100
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="fee"><a class="header" href="#fee"><code>fee</code></a></h2>
<h3 id="signature-2"><a class="header" href="#signature-2">Signature</a></h3>
<pre><code class="language-solidity">function fee(uint256) external;
</code></pre>
<h3 id="description-2"><a class="header" href="#description-2">Description</a></h3>
<p>Sets <code>block.basefee</code>.</p>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<pre><code class="language-solidity">cheats.fee(25 gwei);
emit log_uint(block.basefee); // 25000000000
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="store"><a class="header" href="#store"><code>store</code></a></h2>
<h3 id="signature-3"><a class="header" href="#signature-3">Signature</a></h3>
<pre><code class="language-solidity">function store(address account, bytes32 slot, bytes32 value) external;
</code></pre>
<h3 id="description-3"><a class="header" href="#description-3">Description</a></h3>
<p>Stores the value <code>value</code> in storage slot <code>slot</code> on account <code>account</code>.</p>
<h3 id="examples-4"><a class="header" href="#examples-4">Examples</a></h3>
<pre><code class="language-solidity">/// contract LeetContract {
///     uint256 private leet = 1337; // slot 0
/// }

cheats.store(address(leetContract), bytes32(uint256(0)), bytes32(uint256(31337)));
bytes32 leet = cheats.load(address(leetContract), bytes32(uint256(0)));
emit log_uint(uint256(leet)); // 31337
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="load"><a class="header" href="#load"><code>load</code></a></h2>
<h3 id="signature-4"><a class="header" href="#signature-4">Signature</a></h3>
<pre><code class="language-solidity">function load(address account, bytes32 slot) external returns (bytes32);
</code></pre>
<h3 id="description-4"><a class="header" href="#description-4">Description</a></h3>
<p>Loads the value from storage slot <code>slot</code> on account <code>account</code>.</p>
<h3 id="examples-5"><a class="header" href="#examples-5">Examples</a></h3>
<pre><code class="language-solidity">/// contract LeetContract {
///     uint256 private leet = 1337; // slot 0
/// }

bytes32 leet = cheats.load(address(leetContract), bytes32(uint256(0)));
emit log_uint(uint256(leet)); // 1337
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="etch"><a class="header" href="#etch"><code>etch</code></a></h2>
<h3 id="signature-5"><a class="header" href="#signature-5">Signature</a></h3>
<pre><code class="language-solidity">function etch(address who, bytes calldata code) external;
</code></pre>
<h3 id="description-5"><a class="header" href="#description-5">Description</a></h3>
<p>Sets the bytecode of an address <code>who</code> to <code>code</code>.</p>
<h3 id="examples-6"><a class="header" href="#examples-6">Examples</a></h3>
<pre><code class="language-solidity">bytes memory code = address(awesomeContract).code;
address targetAddr = address(1);
cheats.etch(targetAddr, code);
log_bytes(address(targetAddr).code); // 0x6080604052348015610010...
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="deal"><a class="header" href="#deal"><code>deal</code></a></h2>
<h3 id="signature-6"><a class="header" href="#signature-6">Signature</a></h3>
<pre><code class="language-solidity">function deal(address who, uint256 newBalance) external;
</code></pre>
<h3 id="description-6"><a class="header" href="#description-6">Description</a></h3>
<p>Sets the balance of an address <code>who</code> to <code>newBalance</code>.</p>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<pre><code class="language-solidity">address alice = address(1);
cheats.deal(alice, 1 ether);
log_uint256(alice.balance); // 1000000000000000000
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="prank"><a class="header" href="#prank"><code>prank</code></a></h2>
<h3 id="signature-7"><a class="header" href="#signature-7">Signature</a></h3>
<pre><code class="language-solidity">function prank(address) external;
</code></pre>
<pre><code class="language-solidity">function prank(address sender, address origin) external;
</code></pre>
<h3 id="description-7"><a class="header" href="#description-7">Description</a></h3>
<p>Sets <code>msg.sender</code> to the specified address <strong>for the next call</strong>. &quot;The next call&quot; includes static calls as well, but not calls to the cheat code address.</p>
<p>If the alternative signature of <code>prank</code> is used, then <code>tx.origin</code> is set as well for the next call.</p>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<pre><code class="language-solidity">/// function withdraw() public {
///     require(msg.sender == owner);

cheats.prank(owner);
myContract.withdraw(); // [PASS]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="startprank"><a class="header" href="#startprank"><code>startPrank</code></a></h2>
<h3 id="signature-8"><a class="header" href="#signature-8">Signature</a></h3>
<pre><code class="language-solidity">function startPrank(address) external;
</code></pre>
<pre><code class="language-solidity">function startPrank(address sender, address origin) external;
</code></pre>
<h3 id="description-8"><a class="header" href="#description-8">Description</a></h3>
<p>Sets <code>msg.sender</code> <strong>for all subsequent calls</strong> until <a href="cheatcodes/./stop-prank.html"><code>stopPrank</code></a> is called.</p>
<p>If the alternative signature of <code>prank</code> is used, then <code>tx.origin</code> is set as well for the next call.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="stopprank"><a class="header" href="#stopprank"><code>stopPrank</code></a></h2>
<h3 id="signature-9"><a class="header" href="#signature-9">Signature</a></h3>
<pre><code class="language-solidity">function stopPrank() external;
</code></pre>
<h3 id="description-9"><a class="header" href="#description-9">Description</a></h3>
<p>Stops an active prank started by <a href="cheatcodes/./start-prank.html"><code>startPrank</code></a>, resetting <code>msg.sender</code> and <code>tx.origin</code> to the values before <code>startPrank</code> was called.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="record"><a class="header" href="#record"><code>record</code></a></h2>
<h3 id="signature-10"><a class="header" href="#signature-10">Signature</a></h3>
<pre><code class="language-solidity">function record() external;
</code></pre>
<h3 id="description-10"><a class="header" href="#description-10">Description</a></h3>
<p>Tell the VM to start recording all storage reads and writes. To access the reads and writes, use <a href="cheatcodes/./accesses.html"><code>accesses</code></a>.</p>
<blockquote>
<p>ℹ️ <strong>Note</strong></p>
<p>Every write also counts as an additional read.</p>
</blockquote>
<h3 id="examples-9"><a class="header" href="#examples-9">Examples</a></h3>
<pre><code class="language-solidity">/// contract NumsContract {
///     uint256 public num1 = 100; // slot 0
///     uint256 public num2 = 200; // slot 1
/// }

cheats.record();
numsContract.num2();
(bytes32[] memory reads, bytes32[] memory writes) = cheats.accesses(
  address(numsContract)
);
emit log_uint(uint256(reads[0])); // 1
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="accesses"><a class="header" href="#accesses"><code>accesses</code></a></h2>
<h3 id="signature-11"><a class="header" href="#signature-11">Signature</a></h3>
<pre><code class="language-solidity">function accesses(
  address
)
external
returns (
  bytes32[] memory reads,
  bytes32[] memory writes
);
</code></pre>
<h3 id="description-11"><a class="header" href="#description-11">Description</a></h3>
<p>Gets all storage slots that have been read (<code>reads</code>) or written to (<code>writes</code>) on an address.</p>
<p>Note that <a href="cheatcodes/./record.html"><code>record</code></a> must be called first.</p>
<blockquote>
<p>ℹ️ <strong>Note</strong></p>
<p>Every write also counts as an additional read.</p>
</blockquote>
<h3 id="examples-10"><a class="header" href="#examples-10">Examples</a></h3>
<pre><code class="language-solidity">/// contract NumsContract {
///     uint256 public num1 = 100; // slot 0
///     uint256 public num2 = 200; // slot 1
/// }

cheats.record();
numsContract.num2();
(bytes32[] memory reads, bytes32[] memory writes) = cheats.accesses(
  address(numsContract)
);
emit log_uint(uint256(reads[0])); // 1
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="setnonce"><a class="header" href="#setnonce"><code>setNonce</code></a></h2>
<h3 id="signature-12"><a class="header" href="#signature-12">Signature</a></h3>
<pre><code class="language-solidity">function getNonce(address account, uint256 nonce) external;
</code></pre>
<h3 id="description-12"><a class="header" href="#description-12">Description</a></h3>
<p>Computes the address for a given private key.</p>
<h3 id="examples-11"><a class="header" href="#examples-11">Examples</a></h3>
<pre><code class="language-solidity">cheats.setNonce(address(100), 1234);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="getnonce"><a class="header" href="#getnonce"><code>getNonce</code></a></h2>
<h3 id="signature-13"><a class="header" href="#signature-13">Signature</a></h3>
<pre><code class="language-solidity">function getNonce(address account) external returns (uint64);
</code></pre>
<h3 id="description-13"><a class="header" href="#description-13">Description</a></h3>
<p>Gets the nonce of the given account.</p>
<h3 id="examples-12"><a class="header" href="#examples-12">Examples</a></h3>
<pre><code class="language-solidity">uint256 nonce = cheats.getNonce(address(100));
emit log_uint(nonce); // 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="mockcall"><a class="header" href="#mockcall"><code>mockCall</code></a></h2>
<h3 id="signature-14"><a class="header" href="#signature-14">Signature</a></h3>
<pre><code class="language-solidity">function mockCall(address where, bytes calldata data, bytes calldata retdata) external;
</code></pre>
<h3 id="description-14"><a class="header" href="#description-14">Description</a></h3>
<p>Mocks all calls to an address <code>where</code> if the call data either strictly or loosely matches <code>data</code> and returns <code>retdata</code>.</p>
<p>When a call is made to <code>where</code> the call data is first checked to see if it matches in its entirety with <code>data</code>.
If not, the call data is checked to see if there is a partial match, with the match starting at the first byte of the call data.</p>
<p>If a match is found, then <code>retdata</code> is returned from the call.</p>
<p>Mocked calls are in effect until <a href="cheatcodes/./clear-mocked-calls.html"><code>clearMockedCalls</code></a> is called.</p>
<blockquote>
<p>ℹ️ <strong>Note</strong></p>
<p>Calls to mocked addresses may revert if there is no code on the address.
This is because Solidity inserts an <code>extcodesize</code> check before some contract calls.</p>
<p>To circumvent this, use the <a href="cheatcodes/./etch.html"><code>etch</code></a> cheatcode if the mocked address has no code.</p>
</blockquote>
<blockquote>
<p>ℹ️ <strong>Internal calls</strong></p>
<p>This cheatcode does not currently work on internal calls. See issue <a href="https://github.com/gakonst/foundry/issues/432">#432</a>.</p>
</blockquote>
<h3 id="examples-13"><a class="header" href="#examples-13">Examples</a></h3>
<p>Mocking an exact call:</p>
<pre><code class="language-solidity">function testMockCall() public {
    cheats.mockCall(
        address(0),
        abi.encodeWithSelector(MyToken.balanceOf.selector, address(1)),
        abi.encode(10)
    );
    assertEq(IERC20(address(0)).balanceOf(address(1)), 10);
}
</code></pre>
<p>Mocking an entire function:</p>
<pre><code class="language-solidity">function testMockCall() public {
    cheats.mockCall(
        address(0),
        abi.encodeWithSelector(MyToken.balanceOf.selector),
        abi.encode(10)
    );
    assertEq(IERC20(address(0)).balanceOf(address(1)), 10);
    assertEq(IERC20(address(0)).balanceOf(address(2)), 10);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="clearmockedcalls"><a class="header" href="#clearmockedcalls"><code>clearMockedCalls</code></a></h2>
<h3 id="signature-15"><a class="header" href="#signature-15">Signature</a></h3>
<pre><code class="language-solidity">function clearMockedCalls() external;
</code></pre>
<h3 id="description-15"><a class="header" href="#description-15">Description</a></h3>
<p>Clears all <a href="cheatcodes/./mock-call.html">mocked calls</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="assertions"><a class="header" href="#assertions">Assertions</a></h2>
<ul>
<li><a href="cheatcodes/./expect-revert.html"><code>expectRevert</code></a></li>
<li><a href="cheatcodes/./expect-emit.html"><code>expectEmit</code></a></li>
<li><a href="cheatcodes/./expect-call.html"><code>expectCall</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="expectrevert"><a class="header" href="#expectrevert"><code>expectRevert</code></a></h2>
<h3 id="signature-16"><a class="header" href="#signature-16">Signature</a></h3>
<pre><code class="language-solidity">function expectRevert() external;
</code></pre>
<pre><code class="language-solidity">function expectRevert(bytes4 msg) external;
</code></pre>
<pre><code class="language-solidity">function expectRevert(bytes calldata msg) external;
</code></pre>
<h3 id="description-16"><a class="header" href="#description-16">Description</a></h3>
<p>If the <strong>next call</strong> does not revert with the expected message <code>msg</code>, then <code>expectRevert</code> will.</p>
<p>After calling <code>expectRevert</code>, calls to other cheatcodes before the reverting call are ignored.</p>
<p>This means, for example, we can call <a href="cheatcodes/./prank.html"><code>prank</code></a> immediately before the reverting call.</p>
<p>There are 3 signatures:</p>
<ul>
<li><strong>Without parameters</strong>: Asserts that the next call reverts <strong>without</strong> a message.</li>
<li><strong>With <code>bytes4</code></strong>: Asserts that the next call reverts with the specified 4 bytes.</li>
<li><strong>With <code>bytes</code></strong>: Asserts that the next call reverts with the specified bytes.</li>
</ul>
<blockquote>
<p>⚠️ <strong>Gotcha: Usage with low-level calls</strong></p>
<p>Normally, a call that succeeds returns a status of <code>true</code> (along with any return data) and a call that reverts returns <code>false</code>.</p>
<p>The Solidity compiler will insert checks that ensures that the call succeeded, and revert if it did not.</p>
<p>The <code>expectRevert</code> cheatcode works by inverting this, so the next call after this cheatcode returns <code>true</code> if it reverts, and <code>false</code> otherwise.</p>
<p>The implication here is that to use this cheatcode with low-level calls, you must manually assert on the call's status since Solidity is not doing it for you.</p>
<p>For example:</p>
<pre><code class="language-solidity">function testLowLevelCallRevert() public {
    cheats.expectRevert(bytes(&quot;error message&quot;));
    (bool status, ) = address(myContract).call(myCalldata);
    assertTrue(status, &quot;expectRevert: call did not revert&quot;);
}
</code></pre>
</blockquote>
<h3 id="examples-14"><a class="header" href="#examples-14">Examples</a></h3>
<p>To use <code>expectRevert</code> with a <code>string</code>, convert it to <code>bytes</code>.</p>
<pre><code class="language-solidity">cheats.expectRevert(bytes(&quot;error message&quot;));
</code></pre>
<p>To use <code>expectRevert</code> with a custom <a href="https://docs.soliditylang.org/en/v0.8.11/contracts.html#errors">error type</a> without parameters, use its selector.</p>
<pre><code class="language-solidity">cheats.expectRevert(MyContract.CustomError.selector);
</code></pre>
<p>To use <code>expectRevert</code> with a custom <a href="https://docs.soliditylang.org/en/v0.8.11/contracts.html#errors">error type</a> with parameters, ABI encode the error type.</p>
<pre><code class="language-solidity">cheats.expectRevert(
    abi.encodeWithSelector(MyContract.CustomError.selector, 1, 2)
);
</code></pre>
<p>If you need to assert that a function reverts <em>without</em> a message, you can do so with <code>expectRevert()</code>.</p>
<pre><code class="language-solidity">function testExpectRevertNoReason() public {
    Reverter reverter = new Reverter();
    cheats.expectRevert();
    reverter.revertWithoutReason();
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="expectemit"><a class="header" href="#expectemit"><code>expectEmit</code></a></h2>
<h3 id="signature-17"><a class="header" href="#signature-17">Signature</a></h3>
<pre><code class="language-solidity">function expectEmit(
    bool checkTopic1,
    bool checkTopic2,
    bool checkTopic3,
    bool checkData
) external;
</code></pre>
<h3 id="description-17"><a class="header" href="#description-17">Description</a></h3>
<p>Assert a specific log is emitted before the end of the current function.</p>
<ol>
<li>Call the cheat code, specifying whether we should check the first, second or third topic, and the log data. Topic 0 is always checked.</li>
<li>Emit the event we are supposed to see before the end of the current function.</li>
<li>Perform the call.</li>
</ol>
<p>If the event is not available in the current scope (e.g. if we are using an interface, or an external smart contract), we can define the event ourselves with an identical event signature.</p>
<p>The cheatcode does not check the origin of the event, but simply that it was emitted.</p>
<blockquote>
<p>ℹ️ <strong>Ordering matters</strong></p>
<p>If we call <code>expectEmit</code> and emit an event, then the next event emitted <strong>must</strong> match the one we expect.</p>
</blockquote>
<h3 id="examples-15"><a class="header" href="#examples-15">Examples</a></h3>
<pre><code class="language-solidity">event Transfer(address indexed from, address indexed to, uint256 amount);

function testERC20EmitsTransfer() public {
    // Only `src` and `dst` are indexed in ERC20's `Transfer` event,
    // so we specifically check topics 1 and 2 (topic 0 is always checked by default),
    // as well as the data (`amount`).
    cheats.expectEmit(true, true, false, true);

    // We emit the event we expect to see.
    emit MyToken.Transfer(address(this), address(1), 10);

    // We perform the call.
    myToken.transfer(address(1), 10);
}
</code></pre>
<p>We can also assert that multiple events are emitted in a single call.</p>
<pre><code class="language-solidity">function testERC20EmitsBatchTransfer() public {
    // We declare multiple expected transfer events
    for (uint256 i = 0; i &lt; users.length; i++) {
        cheats.expectEmit(true, true, true, true);
        emit Transfer(address(this), users[i], 10);
    }

    // We also expect a custom `BatchTransfer(uint256 numberOfTransfers)` event.
    cheats.expectEmit(false, false, false, false);
    emit BatchTransfer(users.length);

    // We perform the call.
    myToken.batchTransfer(users, 10);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="expectcall"><a class="header" href="#expectcall"><code>expectCall</code></a></h2>
<pre><code class="language-solidity">function expectCall(address where, bytes calldata data) external;
</code></pre>
<h3 id="description-18"><a class="header" href="#description-18">Description</a></h3>
<p>Expects at least one call to address <code>where</code>, where the call data either strictly or loosely matches <code>data</code>.</p>
<p>When a call is made to <code>where</code> the call data is first checked to see if it matches in its entirety with <code>data</code>. If not, the call data is checked to see if there is a partial match, with the match starting at the first byte of the call data.</p>
<p>If the test terminates without the call being made, the test fails.</p>
<blockquote>
<p>ℹ️ <strong>Internal calls</strong></p>
<p>This cheatcode does not currently work on internal calls. See issue <a href="https://github.com/gakonst/foundry/issues/432">#432</a>.</p>
</blockquote>
<h3 id="examples-16"><a class="header" href="#examples-16">Examples</a></h3>
<p>Expect that <code>transfer</code> is called on a token <code>MyToken</code>:</p>
<pre><code class="language-solidity">address alice = address(10);
cheats.expectCall(
  address(token), abi.encodeCall(token.transfer, (alice, 10))
);
token.transfer(alice, 10);
// [PASS]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="fuzzer"><a class="header" href="#fuzzer">Fuzzer</a></h2>
<ul>
<li><a href="cheatcodes/./assume.html"><code>assume</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="assume"><a class="header" href="#assume"><code>assume</code></a></h2>
<h3 id="signature-18"><a class="header" href="#signature-18">Signature</a></h3>
<pre><code class="language-solidity">function assume(bool) external;
</code></pre>
<h3 id="description-19"><a class="header" href="#description-19">Description</a></h3>
<p>If the boolean expression evaluates to false, the fuzzer will discard the current fuzz inputs and start a new fuzz run.</p>
<p>The <code>assume</code> cheatcode should mainly be used for very narrow checks.
Broad checks will slow down tests as it will take a while to find valid values, and the test may fail if you hit the max number of rejects.</p>
<p>You can configure the rejection thresholds by setting <a href="cheatcodes/./config.html#fuzz_max_local_rejects"><code>fuzz_max_local_rejects</code></a> and <a href="cheatcodes/./config.html#fuzz_max_global_rejects"><code>fuzz_max_global_rejects</code></a> in your <code>foundry.toml</code> file.</p>
<p>For broad checks, such as ensuring a <code>uint256</code> falls within a certain range, you can bound your input with the modulo operator or Solmate's <a href="https://github.com/Rari-Capital/solmate/blob/a9e3ea26a2dc73bfa87f0cb189687d029028e0c5/src/test/utils/DSTestPlus.sol#L114-L133"><code>bound</code></a> method.</p>
<p>More information on filtering via <code>assume</code> can be found <a href="https://altsysrq.github.io/proptest-book/proptest/tutorial/filtering.html#filtering">here</a>.</p>
<h3 id="examples-17"><a class="header" href="#examples-17">Examples</a></h3>
<pre><code class="language-solidity">// Good example of using assume
function testX(uint256 a) public {
    cheats.assume(a != 1);
    require(a != 1);
    // [PASS]
}
</code></pre>
<pre><code class="language-solidity">// In this case assume is not a great fit, so you should bound inputs manually
function testY(uint256 a) public {
    a = bound(a, 100, 1e36);
    require(a &gt;= 100 &amp;&amp; a &lt;= 1e36);
    // [PASS]
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="external"><a class="header" href="#external">External</a></h2>
<ul>
<li><a href="cheatcodes/./ffi.html"><code>ffi</code></a></li>
<li><a href="cheatcodes/./get-code.html"><code>getCode</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ffi-1"><a class="header" href="#ffi-1"><code>ffi</code></a></h2>
<h3 id="signature-19"><a class="header" href="#signature-19">Signature</a></h3>
<pre><code class="language-solidity">function ffi(string[] calldata) external returns (bytes memory);
</code></pre>
<h3 id="description-20"><a class="header" href="#description-20">Description</a></h3>
<p>Calls an arbitrary command if <a href="cheatcodes/./config.html#ffi"><code>ffi</code></a> is enabled.</p>
<p>It is generally advised to use this cheat code as a last resort, and to not enable it by default, as anyone who can change the tests of a project will be able to execute arbitrary commands on devices that run the tests.</p>
<h3 id="examples-18"><a class="header" href="#examples-18">Examples</a></h3>
<pre><code class="language-solidity">string[] memory inputs = new string[](3);
inputs[0] = &quot;echo&quot;;
inputs[1] = &quot;-n&quot;;
// ABI encoded &quot;gm&quot;, as a string
inputs[2] = &quot;0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002676d000000000000000000000000000000000000000000000000000000000000&quot;;

bytes memory res = cheats.ffi(inputs);
string memory output = abi.decode(res, (string));
assertEq(output, &quot;gm&quot;);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="getcode"><a class="header" href="#getcode"><code>getCode</code></a></h2>
<h3 id="signature-20"><a class="header" href="#signature-20">Signature</a></h3>
<pre><code class="language-solidity">function getCode(string calldata) external returns (bytes memory);
</code></pre>
<h3 id="description-21"><a class="header" href="#description-21">Description</a></h3>
<p>Returns the bytecode for a contract in the project given the path to the contract.</p>
<p>The calldata parameter can either be in the form <code>ContractFile.sol</code> (if the filename and contract name are the same), <code>ContractFile.sol:ContractName</code>, or the path to an artifact, relative to the root of your project.</p>
<h3 id="examples-19"><a class="header" href="#examples-19">Examples</a></h3>
<pre><code class="language-solidity">MyContract myContract = new MyContract(arg1, arg2);

// Let's do the same thing with `getCode`
bytes memory args = abi.encode(arg1, arg2);
bytes memory bytecode = abi.encodePacked(cheats.getCode(&quot;MyContract.sol:MyContract&quot;), args);
address anotherAddress;
assembly {
    anotherAddress := create(0, add(bytecode, 0x20), mload(bytecode))
}

assertEq0(address(myContract).code, anotherAddress.code); // [PASS]
</code></pre>
<p>If you'd like to use getCode to deploy a contract's bytecode, you can also use <a href="https://github.com/brockelmore/forge-std">Forge Std</a>'s <code>deployCode</code> helper.</p>
<pre><code class="language-solidity">function testDeployCode() public {
    // deployCode takes a string argument for the contract to deploy
    // and optionally a bytes argument for any arguments that should
    // be passed to your contract's constructor
    address deployed = deployCode(&quot;StdCheats.t.sol:StdCheatsTest&quot;, bytes(&quot;&quot;));
    // ...
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="utilities"><a class="header" href="#utilities">Utilities</a></h2>
<ul>
<li><a href="cheatcodes/./addr.html"><code>addr</code></a></li>
<li><a href="cheatcodes/./sign.html"><code>sign</code></a></li>
<li><a href="cheatcodes/./label.html"><code>label</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="addr"><a class="header" href="#addr"><code>addr</code></a></h2>
<h3 id="signature-21"><a class="header" href="#signature-21">Signature</a></h3>
<pre><code class="language-solidity">function addr(uint256 privateKey) external returns (address);
</code></pre>
<h3 id="description-22"><a class="header" href="#description-22">Description</a></h3>
<p>Computes the address for a given private key.</p>
<h3 id="examples-20"><a class="header" href="#examples-20">Examples</a></h3>
<pre><code class="language-solidity">address alice = cheats.addr(1);
emit log_address(alice); // 0x7e5f4552091a69125d5dfcb7b8c2659029395bdf
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sign"><a class="header" href="#sign"><code>sign</code></a></h2>
<h3 id="signature-22"><a class="header" href="#signature-22">Signature</a></h3>
<pre><code class="language-solidity">function sign(uint256 privateKey, bytes32 digest) external returns (uint8 v, bytes32 r, bytes32 s);
</code></pre>
<h3 id="description-23"><a class="header" href="#description-23">Description</a></h3>
<p>Signs a digest <code>digest</code> with private key <code>privateKey</code>, returning <code>(v, r, s)</code>.</p>
<p>This is useful for testing functions that take signed data and perform an <code>ecrecover</code> to verify the signer.</p>
<h3 id="examples-21"><a class="header" href="#examples-21">Examples</a></h3>
<pre><code class="language-solidity">address alice = cheats.addr(1);
bytes32 hash = keccak256(&quot;Signed by Alice&quot;);
(uint8 v, bytes32 r, bytes32 s) = cheats.sign(1, hash);
address signer = ecrecover(hash, v, r, s);
assertEq(alice, signer); // [PASS]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="label"><a class="header" href="#label"><code>label</code></a></h2>
<h3 id="signature-23"><a class="header" href="#signature-23">Signature</a></h3>
<pre><code class="language-solidity">function label(address addr, string calldata label) external;
</code></pre>
<h3 id="description-24"><a class="header" href="#description-24">Description</a></h3>
<p>Sets a label <code>label</code> for <code>addr</code> in test traces.</p>
<p>If an address is labelled, the label will show up in test traces instead of the address.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="src/static/solidity.min.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
